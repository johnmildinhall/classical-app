function clickMoreRecordedComposers(){var e=document.getElementById("moreComposers");e&&e.addEventListener("click",function(){var e=this;console.log(this),startLoader(e);var t=document.getElementById("id-holder").innerHTML,s=document.getElementsByClassName("relatedBox").length,a=new XMLHttpRequest;a.open("GET","/artist-most-recorded/"+t+"/"+s,!0),a.onload=function(){if(this.status>=200&&this.status<400){var t=JSON.parse(this.response);for(console.log(t),i=0;i<t.length;i++){var s=document.getElementsByClassName("relatedBox")[0].cloneNode(!0);console.log(s),s.getElementsByClassName("relatedImage")[0].setAttribute("style",t[i].imageSmall),s.getElementsByClassName("relatedName")[0].innerHTML=t[i].composer,s.getElementsByClassName("composerLink")[0].setAttribute("href","/composer/"+t[i].composer);var a=document.querySelectorAll(".related.comp")[0];a.insertBefore(s,e),t.length<10&&setTimeout(function(){removeButton(e)},3e3)}stopLoader(e)}},a.onerror=function(){},a.send()})}function clickMoreRelatedArtists(){var e=document.getElementById("moreArtists");e.addEventListener("click",function(){var e=this;startLoader(e);var t=document.getElementById("id-holder").innerHTML,s=document.getElementsByClassName("relatedArtistBox").length,a=new XMLHttpRequest;a.open("GET","/artist-related-artists/"+t+"/"+s,!0),a.onload=function(){if(this.status>=200&&this.status<400){var t=JSON.parse(this.response);for(console.log(t),console.log(t.length),i=0;i<t.length;i++){var s=document.getElementsByClassName("relatedArtistBox")[0].cloneNode(!0);console.log(s),s.getElementsByClassName("relatedImage")[0].setAttribute("style",'background-image:url("'+t[i].imageSmall+'")'),s.getElementsByClassName("relatedArtistName")[0].innerHTML=t[i].name,s.getElementsByClassName("artistLink")[0].setAttribute("href","/artists/"+t[i].name);var a=document.querySelectorAll(".related.art")[0];a.insertBefore(s,e),t.length<10&&setTimeout(function(){removeButton(e)},3e3)}stopLoader(e)}},a.onerror=function(){},a.send()})}function artistList(){var e=document.getElementById("moreArtists");e.addEventListener("click",getMoreArtists,!1)}function getMoreArtists(){console.log("moreArtists");var e=document.getElementsByClassName("grid-item").length;console.log(e);var t="artist-list";callAPI(t,e,addGridItems)}function clickMoreComposers(){var e=document.getElementById("moreComposers");console.log(e),e&&e.addEventListener("click",function(){var e=this;startLoader(e);var t=document.getElementById("id-holder").innerHTML,s=document.getElementsByClassName("relatedBox").length,a=new XMLHttpRequest;a.open("GET","/composer-related-artists/"+t+"/"+s,!0),a.onload=function(){if(this.status>=200&&this.status<400){var t=JSON.parse(this.response);for(console.log(t),i=0;i<t.length;i++){var s=document.getElementsByClassName("relatedBox")[0].cloneNode(!0);console.log(s),s.getElementsByClassName("relatedImage")[0].setAttribute("style",'background-image:url("'+t[i].imageSmall+'")'),s.getElementsByClassName("relatedName")[0].innerHTML=t[i].name,s.getElementsByClassName("composerLink")[0].setAttribute("href","/composers/"+t[i].name);var a=document.querySelectorAll(".related.comp")[0];a.insertBefore(s,e),t.length<10&&setTimeout(function(){removeButton(e)},3e3)}stopLoader(e)}},a.onerror=function(){},a.send()})}function clickMoreBio(){var e=document.getElementsByClassName("ellipsis")[0],t=document.getElementsByClassName("moreBio")[0],s=document.getElementsByClassName("second")[0];t.addEventListener("click",function(){e.className="ellipsis hidden",t.className="moreBio hidden",s.className="second"})}function clickMoreArtists(){var e=document.getElementById("moreArtists");e.addEventListener("click",function(){var e=this;startLoader(e);var t=document.getElementById("id-holder").innerHTML,s=document.getElementsByClassName("relatedArtistBox").length,a=new XMLHttpRequest;a.open("GET","/composer-most-recorded/"+t+"/"+s,!0),a.onload=function(){if(this.status>=200&&this.status<400){var t=JSON.parse(this.response);for(console.log(t),i=0;i<t.length;i++){var s=document.getElementsByClassName("relatedArtistBox")[0].cloneNode(!0);console.log(s),s.getElementsByClassName("relatedImage")[0].setAttribute("style",'background-image:url("'+t[i].imageSmall+'")'),s.getElementsByClassName("relatedArtistName")[0].innerHTML=t[i].artist,s.getElementsByClassName("artistLink")[0].setAttribute("href","/artists/"+t[i].artist);var a=document.querySelectorAll(".related.art")[0];a.insertBefore(s,e),t.length<10&&setTimeout(function(){removeButton(e)},3e3)}stopLoader(e)}},a.onerror=function(){},a.send()})}function composerList(){var e=document.getElementById("moreComposers");e.addEventListener("click",getMoreComposers,!1)}function getMoreComposers(){console.log("moreComposers");var e=document.getElementsByClassName("grid-item").length;console.log(e);var t="composer-list";callAPI(t,e,addGridItems)}function trackPreview(){for(var e=document.getElementsByClassName("play"),t=0;t<e.length;t++)e[t].removeEventListener("click",clickToPlay,!1),e[t].addEventListener("click",clickToPlay,!1);var s=document.getElementsByClassName("pause");for(t=0;t<s.length;t++)s[t].removeEventListener("click",clickToPause,!1),s[t].addEventListener("click",clickToPause,!1)}function clickToPlay(){resetPlayButtons();var e=this.id;audio.src=this.dataset.preview,audio.play(),this.className="play hidden",console.log("#"+e+" .pause");var t=document.querySelectorAll("#"+e+".pause");t[0].className="pause",console.log(t),setTimeout(function(){document.getElementById(e).className="play"},3e4)}function clickToPause(){var e=this.id;audio.pause(),this.className="pause hidden";var t=document.querySelectorAll("#"+e+".play");t[0].className="play"}function resetPlayButtons(){for(var e=document.getElementsByClassName("play"),t=e.length;t--;)e[t].className="play";var s=document.getElementsByClassName("pause");for(t=e.length;t--;)s[t].className="pause hidden"}function clickMoreAlbums(e){var t=document.getElementById("moreAlbums");t&&t.addEventListener("click",function(){var t=this,s=document.getElementsByClassName("albumBox").length,a=document.getElementById("id-holder").innerHTML;startLoader(t);var n=null;n="composer"===e?"/composer-albums/":"/artist-albums/",console.log(n+a+"/"+s);var l=new XMLHttpRequest;l.open("GET",n+a+"/"+s,!0),l.onload=function(){if(this.status>=200&&this.status<400){var e=JSON.parse(this.response);for(console.log(e),i=0;i<e.length;i++){var s=document.getElementsByClassName("albumBox"),a=s[0].cloneNode(!0);a.setAttribute("id",e[i].ID);var n=a.getElementsByClassName("albumBoxInner");n[0].setAttribute("style",'background-image: url("'+e[i].image+'")');var l=document.querySelectorAll(".albums.ag")[0];l.appendChild(a)}clickAlbums(),stopLoader(t),e.length<8&&(console.log("remove"),removeButton(t))}},l.onerror=function(){},l.send()})}function clickAlbums(){for(var e=document.getElementsByClassName("albumBox"),t=0;t<e.length;t++)e[t].removeEventListener("click",function(){openAlbumOverlay(this.id)}),e[t].addEventListener("click",function(){openAlbumOverlay(this.id)})}function openAlbumOverlay(e){var t=new XMLHttpRequest;t.open("GET","/album-tracks/"+e,!0),t.onload=function(){if(this.status>=200&&this.status<400){var e=JSON.parse(this.response);console.log(e);var t=document.getElementsByClassName("olAlbumTitle");t[0].innerHTML=e.name,console.log(document.getElementsByClassName("olAlbumLink")[0]);var s=window.location.href;document.getElementsByClassName("olAlbumLink")[0].innerHTML='<a href ="'+s+"/albums/"+e._id+'">Go to album page</a>',document.getElementsByClassName("olAlbumComposer")[0].innerHTML=e.composers;for(var a in e.tracks){console.log(e.tracks[a].name);var n=document.getElementsByClassName("olTrack p")[0].cloneNode(!0);n.className="olTrack";var l=n.getElementsByClassName("topTrackName");l[0].innerHTML=e.tracks[a].name;var o=n.getElementsByClassName("topTrackArtist ol");o[0].innerHTML=e.tracks[a].artists;var r=n.getElementsByClassName("composer ol");r[0].setAttribute("href",e.tracks[a].composerLink),r[0].innerHTML=e.tracks[a].composer;var i=n.getElementsByClassName("play");i[0].id="a"+e.tracks[a].ID,i[0].setAttribute("data-preview",e.tracks[a].preview_url);var c=n.getElementsByClassName("pause");c[0].id="a"+e.tracks[a].ID,document.querySelectorAll(".olAlbumBody")[0].appendChild(n)}console.log("click to play"),trackPreview(),console.log(e)}},t.onerror=function(){},t.send(),console.log(e);var s=document.getElementsByClassName("bgOverlay");for(i=s.length;i--;)s[i].className="bgOverlay fadein";var a=document.getElementsByClassName("albumOverlay");for(i=a.length;i--;)a[i].className="albumOverlay slideout"}function closeOverlay(){function e(){console.log("remove tracks"),document.querySelectorAll(".olTrack:not(.p)").remove();var e=document.getElementsByClassName("bgOverlay");for(i=e.length;i--;)e[i].className="bgOverlay hidden";var t=document.getElementsByClassName("albumOverlay");for(i=t.length;i--;)t[i].className="albumOverlay slidein"}var t=document.getElementsByClassName("bgOverlay");t[0].addEventListener("click",function(){e()});var s=document.getElementsByClassName("closeWhite");s[0].addEventListener("click",function(){e()})}function startLoader(e){e.className="button loading";var t=e.getElementsByClassName("buttonInner");t[0].className="buttonInner hidden";var s=e.getElementsByClassName("loader");s[0].className="loader"}function stopLoader(e){e.className="button";var t=e.getElementsByClassName("buttonInner");t[0].className="buttonInner";var s=e.getElementsByClassName("loader");s[0].className="loader hidden"}function removeButton(e){e.remove()}function callAPI(e,t,s){var a=new XMLHttpRequest;console.log("/"+e+"/"+t),a.open("GET","/"+e+"/"+t,!0),a.onload=function(){if(this.status>=200&&this.status<400){var e=JSON.parse(this.response);console.log(e),s(e)}else console.log(this.status)},a.onerror=function(){console.log("there has been an error")},a.send()}function updateCall(e,t,s,a){var n=new XMLHttpRequest,e="/"+e+"/"+s;n.open("POST",e,!0),n.setRequestHeader("Content-type","application/json"),n.onreadystatechange=function(){4==n.readyState&&200==n.status&&a(this.response)},n.send(t)}function addGridItems(e){for(console.log(e),i=0;i<e.length;i++){var t=document.getElementsByClassName("grid-item"),s=t[0].cloneNode(!0);s.setAttribute("id",e[i]._id),s.setAttribute("style",e[i].images);var a=s.getElementsByClassName("composer")[0];a.innerHTML=e[i].name;var n=s.getElementsByClassName("relatedComposerLink")[0];n.setAttribute("href",e[i].href);var l=document.getElementsByClassName("grid")[0];l.appendChild(s)}}function changeListen(){var e=document.getElementsByClassName("id-holder")[0].innerHTML,t=document.getElementsByTagName("input"),s=document.getElementsByTagName("textarea");for(i=0;i<t.length;i++)t[i].addEventListener("input",function(t){getForm(e)});for(i=0;i<s.length;i++)s[i].addEventListener("input",function(t){getForm(e)})}function getForm(e){var t=document.getElementsByTagName("input"),s=document.getElementsByTagName("textarea"),a={};for(j=0;j<t.length;j++)a[t[j].className]=t[j].value;for(j=0;j<s.length;j++)a[s[j].className]=s[j].value;console.log(a),a=JSON.stringify(a),updateCall("composer-update",a,e,getResponse)}function getResponse(e){console.log("response: "+e)}function clickAlbumPlay(){var e=document.getElementsByClassName("featuredInnerPlay")[0];e.addEventListener("click",function(){audio.src=this.dataset.preview,audio.play(),this.className="featuredInnerPlay hidden";var e=document.getElementsByClassName("featuredInnerPause")[0];e.className="featuredInnerPause",setTimeout(function(){var t=document.getElementsByClassName("featuredInnerPlay")[0];t.className="featuredInnerPlay",e.className="featuredInnerPause hidden"},3e4)})}function clickAlbumPause(){var e=document.getElementsByClassName("featuredInnerPause")[0];e.addEventListener("click",function(){audio.pause(),e.className="featuredInnerPause hidden";var t=document.getElementsByClassName("featuredInnerPlay")[0];t.className="featuredInnerPlay"})}function openClose(){var e=document.getElementsByClassName("search")[0],t=document.getElementsByClassName("close")[0],s=document.getElementsByClassName("searchOverlay")[0];e.addEventListener("click",function(){s.className="searchOverlay searchSlidein"}),t.addEventListener("click",function(){clearResults(),s.className="searchOverlay searchSlideout"})}function inputListen(){var e=document.getElementsByClassName("searchInput")[0],t=null;e.onkeyup=function(){t&&window.clearTimeout(t),t=window.setTimeout(function(){var t=e.value;t.length>2?(clearResults(),search(t)):clearResults()},500)}}function clearResults(){var e=document.getElementsByClassName("toRemove");for(var t in e)e.remove();var s=document.getElementsByClassName("searchTitle");for(t in s)s[t].className="searchTitle hidden";var a=document.getElementsByClassName("result");a[0].className="result hidden"}function showResults(){document.getElementsByClassName("result")[0].className="result"}function search(e){callAPI("search-composer",e,populateComposer),callAPI("search-artist",e,populateArtist),callAPI("search-album",e,populateAlbum),callAPI("search-track",e,populateTrack)}function populateComposer(e){for(i=0;i<e.length;i++){var t=document.querySelectorAll(".searchLink.composer.hidden")[0].cloneNode(!0);t.className="searchLink composer toRemove",t.setAttribute("href","/composers/"+e[i].name),t.getElementsByClassName("composerSearchName")[0].innerHTML=e[i].name,t.getElementsByClassName("composerSearchImage")[0].setAttribute("style",'background-image:url("'+e[i].imageSmall+'");'),e[i].life&&(t.getElementsByClassName("composerSearchLife")[0].innerHTML=e[i].life[0].birthYear+" - "+e[i].life[0].deathYear);var s=document.querySelectorAll(".results.composer")[0],a=document.querySelectorAll(".searchLink.composer.hidden")[0];s.insertBefore(t,a)}e.length>0&&(showResults(),document.querySelectorAll("#composers.searchTitle")[0].className="searchTitle")}function populateArtist(e){for(i=0;i<e.length;i++){var t=document.querySelectorAll(".searchLink.artist.hidden")[0].cloneNode(!0);t.className="searchLink artist toRemove",t.setAttribute("href","/artists/"+e[i].name),t.getElementsByClassName("artistSearchName")[0].innerHTML=e[i].name,t.getElementsByClassName("artistSearchImage")[0].setAttribute("style",'background-image:url("'+e[i].imageSmall+'");');var s=document.querySelectorAll(".results.artist")[0],a=document.querySelectorAll(".searchLink.artist.hidden")[0];s.insertBefore(t,a)}e.length>0&&(showResults(),document.querySelectorAll("#artists.searchTitle")[0].className="searchTitle")}function populateAlbum(e){for(i=0;i<e.length;i++){var t=document.querySelectorAll(".searchLink.album.hidden")[0].cloneNode(!0);t.className="searchLink album toRemove",t.setAttribute("href","/albums/"+e[i]._id),t.getElementsByClassName("albumSearchName")[0].innerHTML=e[i].name,t.getElementsByClassName("albumSearchImage")[0].setAttribute("style",'background-image:url("'+e[i].image+'");');var s=document.querySelectorAll(".results.album")[0],a=document.querySelectorAll(".searchLink.album.hidden")[0];s.insertBefore(t,a)}e.length>0&&(showResults(),document.querySelectorAll("#albums.searchTitle")[0].className="searchTitle")}function populateTrack(e){for(i=0;i<e.length;i++){var t=document.querySelectorAll(".searchTrack.hidden")[0].cloneNode(!0);t.className="searchTrack toRemove",t.getElementsByClassName("trackName")[0].innerHTML=e[i].name,t.getElementsByClassName("play")[0].setAttribute("data-preview",e[i].preview_url),t.getElementsByClassName("play")[0].setAttribute("ID","a"+e[i]._id),t.getElementsByClassName("pause")[0].setAttribute("ID","a"+e[i]._id);var s=document.querySelectorAll(".results.track")[0],a=document.querySelectorAll(".searchTrack.hidden")[0];s.insertBefore(t,a)}e.length>0&&(showResults(),document.querySelectorAll("#tracks.searchTitle")[0].className="searchTitle"),trackPreview()}function populateCatalogue(e){console.log("Cat: "+e)}document.addEventListener("DOMContentLoaded",function(e){var t=document.getElementById("pageType").innerHTML;switch(t){case"composer":trackPreview("play","pause"),clickAlbums(),closeOverlay(),clickMoreAlbums("composer"),clickMoreComposers(),clickMoreArtists(),clickMoreBio();break;case"artist":trackPreview("play","pause"),clickAlbums(),closeOverlay(),clickMoreAlbums("artist"),clickMoreRecordedComposers(),clickMoreRelatedArtists();break;case"home":clickAlbumPlay(),clickAlbumPause();break;case"catalogue":trackPreview("play","pause");break;case"artistList":artistList();break;case"composerList":composerList();break;case"edit":changeListen()}}),window.audio=document.createElement("audio"),Element.prototype.remove=function(){this.parentElement.removeChild(this)},NodeList.prototype.remove=HTMLCollection.prototype.remove=function(){for(var e=this.length-1;e>=0;e--)this[e]&&this[e].parentElement&&this[e].parentElement.removeChild(this[e])},document.addEventListener("DOMContentLoaded",function(e){openClose(),inputListen()});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFydGlzdC5qcyIsImFydGlzdExpc3QuanMiLCJjb21wb3Nlci5qcyIsImNvbXBvc2VyTGlzdC5qcyIsImNvcmUuanMiLCJlZGl0LmpzIiwiaG9tZS5qcyIsInNlYXJjaC5qcyJdLCJuYW1lcyI6WyJjbGlja01vcmVSZWNvcmRlZENvbXBvc2VycyIsIm1vcmVDb21wb3NlcnMiLCJkb2N1bWVudCIsImdldEVsZW1lbnRCeUlkIiwiYWRkRXZlbnRMaXN0ZW5lciIsInRoaXNCdXR0b24iLCJ0aGlzIiwiY29uc29sZSIsImxvZyIsInN0YXJ0TG9hZGVyIiwidGhpc0lEIiwiaW5uZXJIVE1MIiwib2Zmc2V0IiwiZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSIsImxlbmd0aCIsInJlcXVlc3QiLCJYTUxIdHRwUmVxdWVzdCIsIm9wZW4iLCJvbmxvYWQiLCJzdGF0dXMiLCJkYXRhIiwiSlNPTiIsInBhcnNlIiwicmVzcG9uc2UiLCJpIiwicmVsYXRlZEJveCIsImNsb25lTm9kZSIsInNldEF0dHJpYnV0ZSIsImltYWdlU21hbGwiLCJjb21wb3NlciIsInJlbGF0ZWQiLCJxdWVyeVNlbGVjdG9yQWxsIiwiaW5zZXJ0QmVmb3JlIiwic2V0VGltZW91dCIsInJlbW92ZUJ1dHRvbiIsInN0b3BMb2FkZXIiLCJvbmVycm9yIiwic2VuZCIsImNsaWNrTW9yZVJlbGF0ZWRBcnRpc3RzIiwibW9yZUFydGlzdHMiLCJyZWxhdGVkQXJ0aXN0Qm94IiwibmFtZSIsImFydGlzdExpc3QiLCJtb3JlQnV0dG9uIiwiZ2V0TW9yZUFydGlzdHMiLCJ1cmwiLCJjYWxsQVBJIiwiYWRkR3JpZEl0ZW1zIiwiY2xpY2tNb3JlQ29tcG9zZXJzIiwiY2xpY2tNb3JlQmlvIiwiZWxsaXBzaXMiLCJtb3JlIiwic2Vjb25kIiwiY2xhc3NOYW1lIiwiY2xpY2tNb3JlQXJ0aXN0cyIsImFydGlzdCIsImNvbXBvc2VyTGlzdCIsImdldE1vcmVDb21wb3NlcnMiLCJ0cmFja1ByZXZpZXciLCJwbGF5QnV0dG9ucyIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJjbGlja1RvUGxheSIsInBhdXNlQnV0dG9ucyIsImNsaWNrVG9QYXVzZSIsInJlc2V0UGxheUJ1dHRvbnMiLCJhdWRpbyIsInNyYyIsImRhdGFzZXQiLCJwcmV2aWV3IiwicGxheSIsInRvUGF1c2UiLCJwYXVzZSIsInRvUGxheSIsImNsaWNrTW9yZUFsYnVtcyIsImNvbXBvc2VyT3JBcnRpc3QiLCJtb3JlQWxidW1zIiwiY3VycmVudEFsYnVtcyIsIm5ld0FsYnVtIiwiSUQiLCJiZ0ltYWdlIiwiaW1hZ2UiLCJ0aGVzZUFsYnVtcyIsImFwcGVuZENoaWxkIiwiY2xpY2tBbGJ1bXMiLCJhbGJ1bXMiLCJvcGVuQWxidW1PdmVybGF5IiwiaWQiLCJ0aXRsZSIsImN1cnJlbnRVUkwiLCJ3aW5kb3ciLCJsb2NhdGlvbiIsImhyZWYiLCJfaWQiLCJjb21wb3NlcnMiLCJ0cmFja3MiLCJuZXdUcmFjayIsImFydGlzdHMiLCJjb21wb3NlckxpbmsiLCJwcmV2aWV3X3VybCIsImJnIiwiYWwiLCJjbG9zZU92ZXJsYXkiLCJjbG9zZSIsInJlbW92ZSIsImNsb3NlV2hpdGUiLCJlbGVtZW50IiwiYnV0dG9uSW5uZXIiLCJsb2FkZXIiLCJzZWFyY2hTdHJpbmciLCJjYWxsYmFjayIsInVwZGF0ZUNhbGwiLCJodHRwIiwic2V0UmVxdWVzdEhlYWRlciIsIm9ucmVhZHlzdGF0ZWNoYW5nZSIsInJlYWR5U3RhdGUiLCJjdXJyZW50Q29tcG9zZXJzIiwibmV3R3JpZEl0ZW0iLCJpbWFnZXMiLCJsaW5rIiwiZ3JpZCIsImNoYW5nZUxpc3RlbiIsImlucHV0cyIsImdldEVsZW1lbnRzQnlUYWdOYW1lIiwidGV4dGFyZWFzIiwiZXZ0IiwiZ2V0Rm9ybSIsImoiLCJ2YWx1ZSIsInN0cmluZ2lmeSIsImdldFJlc3BvbnNlIiwiY2xpY2tBbGJ1bVBsYXkiLCJhbGJ1bVBsYXkiLCJzaG93UGF1c2UiLCJzaG93UGxheSIsImNsaWNrQWxidW1QYXVzZSIsImFsYnVtUGF1c2UiLCJvcGVuQ2xvc2UiLCJzZWFyY2hPcGVuIiwic2VhcmNoQ2xvc2UiLCJzZWFyY2hPdmVybGF5IiwiY2xlYXJSZXN1bHRzIiwiaW5wdXRMaXN0ZW4iLCJzZWFyY2hJbnB1dCIsInRpbWVyIiwib25rZXl1cCIsImNsZWFyVGltZW91dCIsInNlYXJjaCIsInRvUmVtb3ZlIiwidGl0bGVzIiwicmVzdWx0Iiwic2hvd1Jlc3VsdHMiLCJwb3B1bGF0ZUNvbXBvc2VyIiwicG9wdWxhdGVBcnRpc3QiLCJwb3B1bGF0ZUFsYnVtIiwicG9wdWxhdGVUcmFjayIsImxpZmUiLCJiaXJ0aFllYXIiLCJkZWF0aFllYXIiLCJwYXJlbnQiLCJyZWZlcmVuY2UiLCJwYXJlbnQxIiwicmVmZXJlbmNlMSIsImFsYnVtIiwidHJhY2siLCJwb3B1bGF0ZUNhdGFsb2d1ZSIsImV2ZW50IiwicGFnZVR5cGUiLCJjcmVhdGVFbGVtZW50IiwiRWxlbWVudCIsInByb3RvdHlwZSIsInBhcmVudEVsZW1lbnQiLCJyZW1vdmVDaGlsZCIsIk5vZGVMaXN0IiwiSFRNTENvbGxlY3Rpb24iXSwibWFwcGluZ3MiOiJBQUFBLFFBQUFBLDhCQUNBLEdBQUFDLEdBQUFDLFNBQUFDLGVBQUEsZ0JBQ0FGLElBQ0FBLEVBQUFHLGlCQUFBLFFBQUEsV0FDQSxHQUFBQyxHQUFBQyxJQUNBQyxTQUFBQyxJQUFBRixNQUNBRyxZQUFBSixFQUNBLElBQUFLLEdBQUFSLFNBQUFDLGVBQUEsYUFBQVEsVUFDQUMsRUFBQVYsU0FBQVcsdUJBQUEsY0FBQUMsT0FDQUMsRUFBQSxHQUFBQyxlQUNBRCxHQUFBRSxLQUFBLE1BQUEseUJBQUFQLEVBQUEsSUFBQUUsR0FBQSxHQUVBRyxFQUFBRyxPQUFBLFdBQ0EsR0FBQVosS0FBQWEsUUFBQSxLQUFBYixLQUFBYSxPQUFBLElBQUEsQ0FDQSxHQUFBQyxHQUFBQyxLQUFBQyxNQUFBaEIsS0FBQWlCLFNBR0EsS0FGQWhCLFFBQUFDLElBQUFZLEdBRUFJLEVBQUEsRUFBQUEsRUFBQUosRUFBQU4sT0FBQVUsSUFBQSxDQUNBLEdBQUFD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QUNBLEtBQUEsWUFDQTVFLGFBQUEsT0FBQSxRQUNBLE1BQ0EsS0FBQSxhQUNBaEIsWUFDQSxNQUNBLEtBQUEsZUFDQWMsY0FDQSxNQUNBLEtBQUEsT0FDQWdFLGtCQUlBL0IsT0FBQXhCLE1BQUEvRCxTQUFBcUssY0FBQSxTQTBWQUMsUUFBQUMsVUFBQWxFLE9BQUEsV0FDQWpHLEtBQUFvSyxjQUFBQyxZQUFBckssT0FFQXNLLFNBQUFILFVBQUFsRSxPQUFBc0UsZUFBQUosVUFBQWxFLE9BQUEsV0FDQSxJQUFBLEdBQUEvRSxHQUFBbEIsS0FBQVEsT0FBQSxFQUFBVSxHQUFBLEVBQUFBLElBQ0FsQixLQUFBa0IsSUFBQWxCLEtBQUFrQixHQUFBa0osZUFDQXBLLEtBQUFrQixHQUFBa0osY0FBQUMsWUFBQXJLLEtBQUFrQixLR3ZZQXRCLFNBQUFFLGlCQUFBLG1CQUFBLFNBQUFpSyxHQUVBN0IsWUFDQUsiLCJmaWxlIjoic2NyaXB0LmpzIiwic291cmNlc0NvbnRlbnQiOlsiZnVuY3Rpb24gY2xpY2tNb3JlUmVjb3JkZWRDb21wb3NlcnMoKXtcblx0dmFyIG1vcmVDb21wb3NlcnMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbW9yZUNvbXBvc2VycycpO1xuXHRpZihtb3JlQ29tcG9zZXJzKXtcblx0XHRtb3JlQ29tcG9zZXJzLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oKXtcblx0XHRcdHZhciB0aGlzQnV0dG9uID0gdGhpcztcblx0XHRcdGNvbnNvbGUubG9nKHRoaXMpO1xuXHRcdFx0c3RhcnRMb2FkZXIodGhpc0J1dHRvbik7XG5cdFx0XHR2YXIgdGhpc0lEID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2lkLWhvbGRlcicpLmlubmVySFRNTDtcblx0XHRcdHZhciBvZmZzZXQgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCdyZWxhdGVkQm94JykubGVuZ3RoO1xuXHRcdFx0dmFyIHJlcXVlc3QgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcblx0XHRcdHJlcXVlc3Qub3BlbignR0VUJywgJy9hcnRpc3QtbW9zdC1yZWNvcmRlZC8nK3RoaXNJRCsnLycrb2Zmc2V0LCB0cnVlKTtcblxuXHRcdFx0cmVxdWVzdC5vbmxvYWQgPSBmdW5jdGlvbigpIHtcblx0XHRcdFx0aWYgKHRoaXMuc3RhdHVzID49IDIwMCAmJiB0aGlzLnN0YXR1cyA8IDQwMCkge1xuXHRcdFx0XHRcdHZhciBkYXRhID0gSlNPTi5wYXJzZSh0aGlzLnJlc3BvbnNlKTtcblx0XHRcdFx0XHRjb25zb2xlLmxvZyhkYXRhKTtcblxuXHRcdFx0XHRcdGZvciAoIGkgPSAwIDsgaSA8IGRhdGEubGVuZ3RoIDsgaSsrICl7XG5cdFx0XHRcdFx0XHR2YXIgcmVsYXRlZEJveCA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ3JlbGF0ZWRCb3gnKVswXS5jbG9uZU5vZGUodHJ1ZSk7XG5cdFx0XHRcdFx0XHRjb25zb2xlLmxvZyhyZWxhdGVkQm94KTtcblxuXHRcdFx0XHRcdFx0Ly9iYWNrZ3JvdW5kIGltYWdlXG5cdFx0XHRcdFx0XHRyZWxhdGVkQm94LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ3JlbGF0ZWRJbWFnZScpWzBdLnNldEF0dHJpYnV0ZSgnc3R5bGUnLGRhdGFbaV0uaW1hZ2VTbWFsbCk7XG5cblx0XHRcdFx0XHRcdC8vbmFtZVxuXHRcdFx0XHRcdFx0cmVsYXRlZEJveC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCdyZWxhdGVkTmFtZScpWzBdLmlubmVySFRNTCA9IGRhdGFbaV0uY29tcG9zZXI7XG5cblx0XHRcdFx0XHRcdC8vbGlua1xuXHRcdFx0XHRcdFx0cmVsYXRlZEJveC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCdjb21wb3NlckxpbmsnKVswXS5zZXRBdHRyaWJ1dGUoJ2hyZWYnLCcvY29tcG9zZXIvJytkYXRhW2ldLmNvbXBvc2VyKTtcblx0XHRcdFx0XHRcdHZhciByZWxhdGVkID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnJlbGF0ZWQuY29tcCcpWzBdO1xuXHRcdFx0XHRcdFx0cmVsYXRlZC5pbnNlcnRCZWZvcmUocmVsYXRlZEJveCwgdGhpc0J1dHRvbik7XG5cblx0XHRcdFx0XHRcdGlmKCBkYXRhLmxlbmd0aCA8IDEwICl7XG5cdFx0XHRcdFx0XHRcdHNldFRpbWVvdXQoZnVuY3Rpb24oKXsgcmVtb3ZlQnV0dG9uKHRoaXNCdXR0b24pOyB9LCAzMDAwKTtcblx0XHRcdFx0XHRcdFx0XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHQvL3JlbGF0ZWQuYXBwZW5kQ2hpbGQocmVsYXRlZEJveCk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdHN0b3BMb2FkZXIodGhpc0J1dHRvbik7XG5cblx0XHRcdFx0fSBlbHNlIHtcblxuXHRcdFx0XHQvLyBXZSByZWFjaGVkIG91ciB0YXJnZXQgc2VydmVyLCBidXQgaXQgcmV0dXJuZWQgYW4gZXJyb3JcblxuXHRcdFx0XHR9XG5cdFx0XHR9O1xuXG5cdFx0XHRyZXF1ZXN0Lm9uZXJyb3IgPSBmdW5jdGlvbigpIHtcblx0XHRcdFx0Ly8gVGhlcmUgd2FzIGEgY29ubmVjdGlvbiBlcnJvciBvZiBzb21lIHNvcnRcblx0XHRcdH07XG5cblx0XHRcdHJlcXVlc3Quc2VuZCgpO1xuXHRcdH0pO1xuXHRcdFx0XG5cdH1cblxufVxuXG5mdW5jdGlvbiBjbGlja01vcmVSZWxhdGVkQXJ0aXN0cygpe1xuXHR2YXIgbW9yZUFydGlzdHMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbW9yZUFydGlzdHMnKTtcblx0bW9yZUFydGlzdHMuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbigpe1xuXHRcdHZhciB0aGlzQnV0dG9uID0gdGhpcztcblx0XHRzdGFydExvYWRlcih0aGlzQnV0dG9uKTtcblx0XHR2YXIgdGhpc0lEID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2lkLWhvbGRlcicpLmlubmVySFRNTDtcblx0XHR2YXIgb2Zmc2V0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgncmVsYXRlZEFydGlzdEJveCcpLmxlbmd0aDtcblx0XHR2YXIgcmVxdWVzdCA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xuXHRcdHJlcXVlc3Qub3BlbignR0VUJywgJy9hcnRpc3QtcmVsYXRlZC1hcnRpc3RzLycrdGhpc0lEKycvJytvZmZzZXQsIHRydWUpO1xuXG5cdFx0cmVxdWVzdC5vbmxvYWQgPSBmdW5jdGlvbigpIHtcblx0XHRcdGlmICh0aGlzLnN0YXR1cyA+PSAyMDAgJiYgdGhpcy5zdGF0dXMgPCA0MDApIHtcblx0XHRcdFx0dmFyIGRhdGEgPSBKU09OLnBhcnNlKHRoaXMucmVzcG9uc2UpO1xuXHRcdFx0XHRjb25zb2xlLmxvZyhkYXRhKTtcblxuXHRcdFx0XHRjb25zb2xlLmxvZyhkYXRhLmxlbmd0aCk7XG5cdFx0XHRcdGZvciAoIGkgPSAwIDsgaSA8IGRhdGEubGVuZ3RoIDsgaSsrICl7XG5cdFx0XHRcdFx0dmFyIHJlbGF0ZWRBcnRpc3RCb3ggPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCdyZWxhdGVkQXJ0aXN0Qm94JylbMF0uY2xvbmVOb2RlKHRydWUpO1xuXHRcdFx0XHRcdGNvbnNvbGUubG9nKHJlbGF0ZWRBcnRpc3RCb3gpO1xuXG5cdFx0XHRcdFx0Ly9iYWNrZ3JvdW5kIGltYWdlXG5cdFx0XHRcdFx0cmVsYXRlZEFydGlzdEJveC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCdyZWxhdGVkSW1hZ2UnKVswXS5zZXRBdHRyaWJ1dGUoJ3N0eWxlJywnYmFja2dyb3VuZC1pbWFnZTp1cmwoXCInK2RhdGFbaV0uaW1hZ2VTbWFsbCsnXCIpJyk7XG5cblx0XHRcdFx0XHQvL25hbWVcblx0XHRcdFx0XHRyZWxhdGVkQXJ0aXN0Qm94LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ3JlbGF0ZWRBcnRpc3ROYW1lJylbMF0uaW5uZXJIVE1MID0gZGF0YVtpXS5uYW1lO1xuXG5cdFx0XHRcdFx0Ly9saW5rXG5cdFx0XHRcdFx0cmVsYXRlZEFydGlzdEJveC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCdhcnRpc3RMaW5rJylbMF0uc2V0QXR0cmlidXRlKCdocmVmJywnL2FydGlzdHMvJytkYXRhW2ldLm5hbWUpO1xuXHRcdFx0XHRcdHZhciByZWxhdGVkID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnJlbGF0ZWQuYXJ0JylbMF07XG5cdFx0XHRcdFx0cmVsYXRlZC5pbnNlcnRCZWZvcmUocmVsYXRlZEFydGlzdEJveCwgdGhpc0J1dHRvbik7XG5cblx0XHRcdFx0XHRpZiggZGF0YS5sZW5ndGggPCAxMCApe1xuXHRcdFx0XHRcdFx0c2V0VGltZW91dChmdW5jdGlvbigpeyByZW1vdmVCdXR0b24odGhpc0J1dHRvbik7IH0sIDMwMDApO1xuXHRcdFx0XHRcdFx0XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdC8vcmVsYXRlZC5hcHBlbmRDaGlsZChyZWxhdGVkQm94KTtcblx0XHRcdFx0fVxuXHRcdFx0XHRzdG9wTG9hZGVyKHRoaXNCdXR0b24pO1xuXG5cdFx0XHR9IGVsc2Uge1xuXG5cdFx0XHQvLyBXZSByZWFjaGVkIG91ciB0YXJnZXQgc2VydmVyLCBidXQgaXQgcmV0dXJuZWQgYW4gZXJyb3JcblxuXHRcdFx0fVxuXHRcdH07XG5cblx0XHRyZXF1ZXN0Lm9uZXJyb3IgPSBmdW5jdGlvbigpIHtcblx0XHQvLyBUaGVyZSB3YXMgYSBjb25uZWN0aW9uIGVycm9yIG9mIHNvbWUgc29ydFxuXHRcdH07XG5cblx0XHRyZXF1ZXN0LnNlbmQoKTtcblx0fSk7XG59XG5cblxuXG5cblxuXG5cblxuXG4iLCJmdW5jdGlvbiBhcnRpc3RMaXN0KCl7XG5cdHZhciBtb3JlQnV0dG9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ21vcmVBcnRpc3RzJyk7XG5cdG1vcmVCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBnZXRNb3JlQXJ0aXN0cywgZmFsc2UpO1xufVxuXG5mdW5jdGlvbiBnZXRNb3JlQXJ0aXN0cygpe1xuXHRjb25zb2xlLmxvZygnbW9yZUFydGlzdHMnKTtcblx0dmFyIG9mZnNldCA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ2dyaWQtaXRlbScpLmxlbmd0aDtcblx0Y29uc29sZS5sb2cob2Zmc2V0KTtcblx0dmFyIHVybCA9ICdhcnRpc3QtbGlzdCc7XG5cdGNhbGxBUEkodXJsICwgb2Zmc2V0ICwgYWRkR3JpZEl0ZW1zICk7XG59XG4iLCJmdW5jdGlvbiBjbGlja01vcmVDb21wb3NlcnMoKXtcblx0dmFyIG1vcmVDb21wb3NlcnMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbW9yZUNvbXBvc2VycycpO1xuXHRjb25zb2xlLmxvZyhtb3JlQ29tcG9zZXJzKTtcblx0aWYobW9yZUNvbXBvc2Vycyl7IC8vb25seSBkbyB0aGlzIGlmIHRoZXJlJ3MgYSBtb3JlIGNvbXBvc2VycyBidXR0b25cblx0XHRtb3JlQ29tcG9zZXJzLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oKXtcblx0XHRcdHZhciB0aGlzQnV0dG9uID0gdGhpcztcblx0XHRcdHN0YXJ0TG9hZGVyKHRoaXNCdXR0b24pO1xuXHRcdFx0dmFyIHRoaXNJRCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdpZC1ob2xkZXInKS5pbm5lckhUTUw7XG5cdFx0XHR2YXIgb2Zmc2V0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgncmVsYXRlZEJveCcpLmxlbmd0aDtcblx0XHRcdHZhciByZXF1ZXN0ID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XG5cdFx0XHRyZXF1ZXN0Lm9wZW4oJ0dFVCcsICcvY29tcG9zZXItcmVsYXRlZC1hcnRpc3RzLycrdGhpc0lEKycvJytvZmZzZXQsIHRydWUpO1xuXG5cdFx0XHRyZXF1ZXN0Lm9ubG9hZCA9IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRpZiAodGhpcy5zdGF0dXMgPj0gMjAwICYmIHRoaXMuc3RhdHVzIDwgNDAwKSB7XG5cdFx0XHRcdFx0dmFyIGRhdGEgPSBKU09OLnBhcnNlKHRoaXMucmVzcG9uc2UpO1xuXHRcdFx0XHRcdGNvbnNvbGUubG9nKGRhdGEpO1xuXG5cdFx0XHRcdFx0Zm9yICggaSA9IDAgOyBpIDwgZGF0YS5sZW5ndGggOyBpKysgKXtcblx0XHRcdFx0XHRcdHZhciByZWxhdGVkQm94ID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgncmVsYXRlZEJveCcpWzBdLmNsb25lTm9kZSh0cnVlKTtcblx0XHRcdFx0XHRcdGNvbnNvbGUubG9nKHJlbGF0ZWRCb3gpO1xuXG5cdFx0XHRcdFx0XHQvL2JhY2tncm91bmQgaW1hZ2Vcblx0XHRcdFx0XHRcdHJlbGF0ZWRCb3guZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgncmVsYXRlZEltYWdlJylbMF0uc2V0QXR0cmlidXRlKCdzdHlsZScsJ2JhY2tncm91bmQtaW1hZ2U6dXJsKFwiJytkYXRhW2ldLmltYWdlU21hbGwrJ1wiKScpO1xuXG5cdFx0XHRcdFx0XHQvL25hbWVcblx0XHRcdFx0XHRcdHJlbGF0ZWRCb3guZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgncmVsYXRlZE5hbWUnKVswXS5pbm5lckhUTUwgPSBkYXRhW2ldLm5hbWU7XG5cblx0XHRcdFx0XHRcdC8vbGlua1xuXHRcdFx0XHRcdFx0cmVsYXRlZEJveC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCdjb21wb3NlckxpbmsnKVswXS5zZXRBdHRyaWJ1dGUoJ2hyZWYnLCcvY29tcG9zZXJzLycrZGF0YVtpXS5uYW1lKTtcblx0XHRcdFx0XHRcdHZhciByZWxhdGVkID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnJlbGF0ZWQuY29tcCcpWzBdO1xuXHRcdFx0XHRcdFx0cmVsYXRlZC5pbnNlcnRCZWZvcmUocmVsYXRlZEJveCwgdGhpc0J1dHRvbik7XG5cblx0XHRcdFx0XHRcdGlmKCBkYXRhLmxlbmd0aCA8IDEwICl7XG5cdFx0XHRcdFx0XHRcdHNldFRpbWVvdXQoZnVuY3Rpb24oKXsgcmVtb3ZlQnV0dG9uKHRoaXNCdXR0b24pOyB9LCAzMDAwKTtcblx0XHRcdFx0XHRcdFx0XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHQvL3JlbGF0ZWQuYXBwZW5kQ2hpbGQocmVsYXRlZEJveCk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdHN0b3BMb2FkZXIodGhpc0J1dHRvbik7XG5cblx0XHRcdFx0fSBlbHNlIHtcblxuXHRcdFx0XHQvLyBXZSByZWFjaGVkIG91ciB0YXJnZXQgc2VydmVyLCBidXQgaXQgcmV0dXJuZWQgYW4gZXJyb3JcblxuXHRcdFx0XHR9XG5cdFx0XHR9O1xuXG5cdFx0XHRyZXF1ZXN0Lm9uZXJyb3IgPSBmdW5jdGlvbigpIHtcblx0XHRcdFx0Ly8gVGhlcmUgd2FzIGEgY29ubmVjdGlvbiBlcnJvciBvZiBzb21lIHNvcnRcblx0XHRcdH07XG5cblx0XHRcdHJlcXVlc3Quc2VuZCgpO1xuXHRcdH0pO1x0XHRcblx0fVxuXG5cbn1cblxuZnVuY3Rpb24gY2xpY2tNb3JlQmlvKCl7XG5cdHZhciBlbGxpcHNpcyA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ2VsbGlwc2lzJylbMF07XG5cdHZhciBtb3JlID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgnbW9yZUJpbycpWzBdO1xuXHR2YXIgc2Vjb25kID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgnc2Vjb25kJylbMF07XG5cdG1vcmUuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbigpe1xuXHRcdGVsbGlwc2lzLmNsYXNzTmFtZSA9ICdlbGxpcHNpcyBoaWRkZW4nO1xuXHRcdG1vcmUuY2xhc3NOYW1lID0gJ21vcmVCaW8gaGlkZGVuJztcblx0XHRzZWNvbmQuY2xhc3NOYW1lID0gJ3NlY29uZCc7XG5cdH0pXG59XG5cbmZ1bmN0aW9uIGNsaWNrTW9yZUFydGlzdHMoKXtcblx0dmFyIG1vcmVBcnRpc3RzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ21vcmVBcnRpc3RzJyk7XG5cdG1vcmVBcnRpc3RzLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oKXtcblx0XHR2YXIgdGhpc0J1dHRvbiA9IHRoaXM7XG5cdFx0c3RhcnRMb2FkZXIodGhpc0J1dHRvbik7XG5cdFx0dmFyIHRoaXNJRCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdpZC1ob2xkZXInKS5pbm5lckhUTUw7XG5cdFx0dmFyIG9mZnNldCA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ3JlbGF0ZWRBcnRpc3RCb3gnKS5sZW5ndGg7XG5cdFx0dmFyIHJlcXVlc3QgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcblx0XHRyZXF1ZXN0Lm9wZW4oJ0dFVCcsICcvY29tcG9zZXItbW9zdC1yZWNvcmRlZC8nK3RoaXNJRCsnLycrb2Zmc2V0LCB0cnVlKTtcblxuXHRcdHJlcXVlc3Qub25sb2FkID0gZnVuY3Rpb24oKSB7XG5cdFx0XHRpZiAodGhpcy5zdGF0dXMgPj0gMjAwICYmIHRoaXMuc3RhdHVzIDwgNDAwKSB7XG5cdFx0XHRcdHZhciBkYXRhID0gSlNPTi5wYXJzZSh0aGlzLnJlc3BvbnNlKTtcblx0XHRcdFx0Y29uc29sZS5sb2coZGF0YSk7XG5cblx0XHRcdFx0Zm9yICggaSA9IDAgOyBpIDwgZGF0YS5sZW5ndGggOyBpKysgKXtcblx0XHRcdFx0XHR2YXIgcmVsYXRlZEFydGlzdEJveCA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ3JlbGF0ZWRBcnRpc3RCb3gnKVswXS5jbG9uZU5vZGUodHJ1ZSk7XG5cdFx0XHRcdFx0Y29uc29sZS5sb2cocmVsYXRlZEFydGlzdEJveCk7XG5cblx0XHRcdFx0XHQvL2JhY2tncm91bmQgaW1hZ2Vcblx0XHRcdFx0XHRyZWxhdGVkQXJ0aXN0Qm94LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ3JlbGF0ZWRJbWFnZScpWzBdLnNldEF0dHJpYnV0ZSgnc3R5bGUnLCdiYWNrZ3JvdW5kLWltYWdlOnVybChcIicrZGF0YVtpXS5pbWFnZVNtYWxsKydcIiknKTtcblxuXHRcdFx0XHRcdC8vbmFtZVxuXHRcdFx0XHRcdHJlbGF0ZWRBcnRpc3RCb3guZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgncmVsYXRlZEFydGlzdE5hbWUnKVswXS5pbm5lckhUTUwgPSBkYXRhW2ldLmFydGlzdDtcblxuXHRcdFx0XHRcdC8vbGlua1xuXHRcdFx0XHRcdHJlbGF0ZWRBcnRpc3RCb3guZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgnYXJ0aXN0TGluaycpWzBdLnNldEF0dHJpYnV0ZSgnaHJlZicsJy9hcnRpc3RzLycrZGF0YVtpXS5hcnRpc3QpO1xuXHRcdFx0XHRcdHZhciByZWxhdGVkID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnJlbGF0ZWQuYXJ0JylbMF07XG5cdFx0XHRcdFx0cmVsYXRlZC5pbnNlcnRCZWZvcmUocmVsYXRlZEFydGlzdEJveCwgdGhpc0J1dHRvbik7XG5cblx0XHRcdFx0XHRpZiggZGF0YS5sZW5ndGggPCAxMCApe1xuXHRcdFx0XHRcdFx0c2V0VGltZW91dChmdW5jdGlvbigpeyByZW1vdmVCdXR0b24odGhpc0J1dHRvbik7IH0sIDMwMDApO1xuXHRcdFx0XHRcdFx0XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdC8vcmVsYXRlZC5hcHBlbmRDaGlsZChyZWxhdGVkQm94KTtcblx0XHRcdFx0fVxuXHRcdFx0XHRzdG9wTG9hZGVyKHRoaXNCdXR0b24pO1xuXG5cdFx0XHR9IGVsc2Uge1xuXG5cdFx0XHQvLyBXZSByZWFjaGVkIG91ciB0YXJnZXQgc2VydmVyLCBidXQgaXQgcmV0dXJuZWQgYW4gZXJyb3JcblxuXHRcdFx0fVxuXHRcdH07XG5cblx0XHRyZXF1ZXN0Lm9uZXJyb3IgPSBmdW5jdGlvbigpIHtcblx0XHRcdC8vIFRoZXJlIHdhcyBhIGNvbm5lY3Rpb24gZXJyb3Igb2Ygc29tZSBzb3J0XG5cdFx0fTtcblxuXHRcdHJlcXVlc3Quc2VuZCgpO1xuXHR9KTtcbn1cblxuXG5cblxuXG5cblxuXG5cbiIsImZ1bmN0aW9uIGNvbXBvc2VyTGlzdCgpe1xuXHR2YXIgbW9yZUJ1dHRvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdtb3JlQ29tcG9zZXJzJyk7XG5cdG1vcmVCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBnZXRNb3JlQ29tcG9zZXJzLCBmYWxzZSk7XG59XG5cbmZ1bmN0aW9uIGdldE1vcmVDb21wb3NlcnMoKXtcblx0Y29uc29sZS5sb2coJ21vcmVDb21wb3NlcnMnKTtcblx0dmFyIG9mZnNldCA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ2dyaWQtaXRlbScpLmxlbmd0aDtcblx0Y29uc29sZS5sb2cob2Zmc2V0KTtcblx0dmFyIHVybCA9ICdjb21wb3Nlci1saXN0Jztcblx0Y2FsbEFQSSh1cmwgLCBvZmZzZXQgLCBhZGRHcmlkSXRlbXMgKTtcbn1cbiIsIi8vZGV0ZXJtaW5lIHdoaWNoIHBhZ2UgYW5kIGFjdCBhY2NvcmRpbmdseVxuZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIkRPTUNvbnRlbnRMb2FkZWRcIiwgZnVuY3Rpb24oZXZlbnQpIHsgXG5cdHZhciBwYWdlVHlwZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwYWdlVHlwZScpLmlubmVySFRNTDtcblx0c3dpdGNoIChwYWdlVHlwZSl7XG5cdFx0Y2FzZSAnY29tcG9zZXInOlxuXHRcdFx0dHJhY2tQcmV2aWV3KCdwbGF5JywncGF1c2UnKTtcblx0XHRcdGNsaWNrQWxidW1zKCk7XG5cdFx0XHRjbG9zZU92ZXJsYXkoKTtcblx0XHRcdGNsaWNrTW9yZUFsYnVtcyhcImNvbXBvc2VyXCIpO1xuXHRcdFx0Y2xpY2tNb3JlQ29tcG9zZXJzKCk7XG5cdFx0XHRjbGlja01vcmVBcnRpc3RzKCk7XG5cdFx0XHRjbGlja01vcmVCaW8oKTtcblx0XHRcdGJyZWFrO1xuXHRcdGNhc2UgJ2FydGlzdCc6XG5cdFx0XHR0cmFja1ByZXZpZXcoJ3BsYXknLCdwYXVzZScpO1xuXHRcdFx0Y2xpY2tBbGJ1bXMoKTtcblx0XHRcdGNsb3NlT3ZlcmxheSgpO1xuXHRcdFx0Y2xpY2tNb3JlQWxidW1zKFwiYXJ0aXN0XCIpO1xuXHRcdFx0Y2xpY2tNb3JlUmVjb3JkZWRDb21wb3NlcnMoKTtcblx0XHRcdGNsaWNrTW9yZVJlbGF0ZWRBcnRpc3RzKCk7XG5cdFx0XHRicmVhaztcblx0XHRjYXNlICdob21lJzpcblx0XHRcdGNsaWNrQWxidW1QbGF5KCk7XG5cdFx0XHRjbGlja0FsYnVtUGF1c2UoKTtcblx0XHRcdGJyZWFrO1xuXHRcdGNhc2UgJ2NhdGFsb2d1ZSc6XG5cdFx0XHR0cmFja1ByZXZpZXcoJ3BsYXknLCdwYXVzZScpO1xuXHRcdFx0YnJlYWs7XG5cdFx0Y2FzZSAnYXJ0aXN0TGlzdCc6XG5cdFx0XHRhcnRpc3RMaXN0KCk7XG5cdFx0XHRicmVhaztcblx0XHRjYXNlICdjb21wb3Nlckxpc3QnOlxuXHRcdFx0Y29tcG9zZXJMaXN0KCk7XG5cdFx0XHRicmVhaztcblx0XHRjYXNlICdlZGl0Jzpcblx0XHRcdGNoYW5nZUxpc3RlbigpO1xuXHR9XG59KTtcblxud2luZG93LmF1ZGlvID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYXVkaW8nKTtcblxuZnVuY3Rpb24gdHJhY2tQcmV2aWV3KCl7XG5cblx0Ly9nZXQgcmlkIG9mIGFueSBwcmV2aW91cyBsaXN0ZW5lcnNcblxuXG5cdHZhciBwbGF5QnV0dG9ucyA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoXCJwbGF5XCIpO1xuXHRmb3IgKHZhciBpID0gMDsgaSA8IHBsYXlCdXR0b25zLmxlbmd0aDsgaSsrKSB7XG5cdFx0cGxheUJ1dHRvbnNbaV0ucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2xpY2snLCBjbGlja1RvUGxheSwgZmFsc2UpO1xuXHRcdHBsYXlCdXR0b25zW2ldLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgY2xpY2tUb1BsYXksIGZhbHNlKTtcblx0fVxuXHR2YXIgcGF1c2VCdXR0b25zID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShcInBhdXNlXCIpO1xuXHRmb3IgKCBpID0gMCA7IGkgPCBwYXVzZUJ1dHRvbnMubGVuZ3RoOyBpKyspe1xuXHRcdHBhdXNlQnV0dG9uc1tpXS5yZW1vdmVFdmVudExpc3RlbmVyKCdjbGljaycsIGNsaWNrVG9QYXVzZSwgZmFsc2UpO1xuXHRcdHBhdXNlQnV0dG9uc1tpXS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGNsaWNrVG9QYXVzZSwgZmFsc2UpO1xuXHR9XG59XG5cbi8vYWRkIHBsYXkgbGlzdGVuZXIgdG8gcGxheSBidXR0b25zXG5mdW5jdGlvbiBjbGlja1RvUGxheSgpIHtcblx0cmVzZXRQbGF5QnV0dG9ucygpO1xuICB2YXIgdGhpc0lEID0gKHRoaXMuaWQpO1xuICBhdWRpby5zcmMgPSB0aGlzLmRhdGFzZXQucHJldmlldztcbiAgYXVkaW8ucGxheSgpO1xuICB0aGlzLmNsYXNzTmFtZSA9IFwicGxheSBoaWRkZW5cIjtcbiAgY29uc29sZS5sb2coJyMnK3RoaXNJRCArICcgLnBhdXNlJyk7XG4gIHZhciB0b1BhdXNlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnIycrdGhpc0lEKycucGF1c2UnKTtcbiAgdG9QYXVzZVswXS5jbGFzc05hbWUgPSAncGF1c2UnO1xuICBjb25zb2xlLmxvZyh0b1BhdXNlKTtcblxuICAvL3JldmVydCB0byBwbGF5IGFmdGVyIDMwc1xuICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7XG4gICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQodGhpc0lEKS5jbGFzc05hbWUgPSBcInBsYXlcIjtcbiAgfSwzMDAwMCk7XG59XG5cbmZ1bmN0aW9uIGNsaWNrVG9QYXVzZSgpe1xuXHR2YXIgdGhpc0lEID0gKHRoaXMuaWQpO1xuXHRhdWRpby5wYXVzZSgpOyBcblx0dGhpcy5jbGFzc05hbWUgPSBcInBhdXNlIGhpZGRlblwiO1xuXHR2YXIgdG9QbGF5ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnIycrdGhpc0lEKycucGxheScpO1xuXHR0b1BsYXlbMF0uY2xhc3NOYW1lID0gJ3BsYXknO1xufVxuXG5mdW5jdGlvbiByZXNldFBsYXlCdXR0b25zKCl7XG5cdHZhciBwbGF5QnV0dG9ucyA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoXCJwbGF5XCIpO1xuXHR2YXIgaSA9IHBsYXlCdXR0b25zLmxlbmd0aDtcblx0d2hpbGUgKGktLSl7XG5cdFx0Ly9jb25zb2xlLmxvZyhpKTtcblx0XHRwbGF5QnV0dG9uc1tpXS5jbGFzc05hbWUgPSBcInBsYXlcIjtcblx0fVxuXHR2YXIgcGF1c2VCdXR0b25zID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShcInBhdXNlXCIpO1xuXHRpID0gcGxheUJ1dHRvbnMubGVuZ3RoO1xuXHR3aGlsZSAoaS0tKXtcblx0XHRwYXVzZUJ1dHRvbnNbaV0uY2xhc3NOYW1lID0gXCJwYXVzZSBoaWRkZW5cIjtcblx0fVxufVxuXG4vL0dldCBtb3JlIGFsYnVtcyBpZiBjbGljayBvbiBtb3JlIGFsYnVtcyBidXR0b25cbmZ1bmN0aW9uIGNsaWNrTW9yZUFsYnVtcyhjb21wb3Nlck9yQXJ0aXN0KXtcblx0dmFyIG1vcmVBbGJ1bXMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbW9yZUFsYnVtcycpO1xuXHRpZihtb3JlQWxidW1zKXtcblx0XHRtb3JlQWxidW1zLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oKXtcblx0XHRcdHZhciB0aGlzQnV0dG9uID0gdGhpcztcblx0XHRcdC8vZ2V0IG51bWJlciBvZiBhbGJ1bXMsIHBsdXMgQ29tcG9zZXIgSURcblx0XHRcdHZhciBvZmZzZXQgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCdhbGJ1bUJveCcpLmxlbmd0aDtcblx0XHRcdHZhciB0aGlzSUQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaWQtaG9sZGVyJykuaW5uZXJIVE1MO1xuXG5cdFx0XHRzdGFydExvYWRlcih0aGlzQnV0dG9uKTtcblxuXHRcdFx0Ly9DaGVjayB3aGV0aGVyIGNvbXBvc2VyIG9yIGFydGlzdFxuXHRcdFx0dmFyIHVybCA9IG51bGw7XG5cdFx0XHRpZiAoY29tcG9zZXJPckFydGlzdCA9PT0gXCJjb21wb3NlclwiKXtcblx0XHRcdFx0dXJsID0gJy9jb21wb3Nlci1hbGJ1bXMvJztcblx0XHRcdH1lbHNle1xuXHRcdFx0XHR1cmwgPSAnL2FydGlzdC1hbGJ1bXMvJztcblx0XHRcdH1cblx0XHRcdGNvbnNvbGUubG9nKHVybCt0aGlzSUQrJy8nK29mZnNldCk7XG5cblxuXHRcdFx0Ly9Mb29rIHVwIGFsYnVtIGJ5IElEXG5cdFx0XHR2YXIgcmVxdWVzdCA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xuXHRcdFx0cmVxdWVzdC5vcGVuKCdHRVQnLCB1cmwrdGhpc0lEKycvJytvZmZzZXQsIHRydWUpO1xuXG5cdFx0XHRyZXF1ZXN0Lm9ubG9hZCA9IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRpZiAodGhpcy5zdGF0dXMgPj0gMjAwICYmIHRoaXMuc3RhdHVzIDwgNDAwKSB7XG5cdFx0XHRcdFx0dmFyIGRhdGEgPSBKU09OLnBhcnNlKHRoaXMucmVzcG9uc2UpO1xuXHRcdFx0XHRcdGNvbnNvbGUubG9nKGRhdGEpO1xuXG5cdFx0XHRcdFx0Ly9sb29wIHRocm91Z2ggYW5kIGFkZCBuZXcgYWxidW1zXG5cdFx0XHRcdFx0Zm9yICggaSA9IDAgOyBpIDwgZGF0YS5sZW5ndGggOyBpKysgKXtcblx0XHRcdFx0XHRcdHZhciBjdXJyZW50QWxidW1zID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShcImFsYnVtQm94XCIpO1xuXHRcdFx0XHRcdFx0dmFyIG5ld0FsYnVtID0gY3VycmVudEFsYnVtc1swXS5jbG9uZU5vZGUodHJ1ZSk7XG5cblx0XHRcdFx0XHRcdC8vSURcblx0XHRcdFx0XHRcdG5ld0FsYnVtLnNldEF0dHJpYnV0ZSgnaWQnLCBkYXRhW2ldLklEKTtcblx0XHRcdFx0XHRcdC8vYmFja2dyb3VuZCBpbWFnZVxuXHRcdFx0XHRcdFx0dmFyIGJnSW1hZ2UgPSBuZXdBbGJ1bS5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKFwiYWxidW1Cb3hJbm5lclwiKTtcblx0XHRcdFx0XHRcdGJnSW1hZ2VbMF0uc2V0QXR0cmlidXRlKCdzdHlsZScsICdiYWNrZ3JvdW5kLWltYWdlOiB1cmwoXCInK2RhdGFbaV0uaW1hZ2UrJ1wiKScpO1xuXHRcdFx0XHRcdFx0Ly9UaXRsZVxuXHRcdFx0XHRcdFx0Ly92YXIgdGl0bGUgPSBuZXdBbGJ1bS5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKFwiYWxidW1OYW1lXCIpWzBdO1xuXHRcdFx0XHRcdFx0Ly90aXRsZS5pbm5lckhUTUwgPSBkYXRhW2ldLm5hbWU7XG5cblx0XHRcdFx0XHRcdHZhciB0aGVzZUFsYnVtcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5hbGJ1bXMuYWcnKVswXTtcblx0XHRcdFx0XHRcdHRoZXNlQWxidW1zLmFwcGVuZENoaWxkKG5ld0FsYnVtKTtcdFx0XHRcdFx0XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdGNsaWNrQWxidW1zKCk7XG5cdFx0XHRcdFx0c3RvcExvYWRlcih0aGlzQnV0dG9uKTtcblx0XHRcdFx0XHRcblx0XHRcdFx0XHQvL2lmIHdlJ3ZlIGdvdCB0byBlbmQgb2YgYWxidW1zLCByZW1vdmUgbW9yZSBhbGJ1bXMgYnV0dG9uXG5cdFx0XHRcdFx0aWYgKCBkYXRhLmxlbmd0aCA8IDggKXtcblx0XHRcdFx0XHRcdGNvbnNvbGUubG9nKFwicmVtb3ZlXCIpO1xuXHRcdFx0XHRcdFx0cmVtb3ZlQnV0dG9uKHRoaXNCdXR0b24pO1xuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHQvLyBXZSByZWFjaGVkIG91ciB0YXJnZXQgc2VydmVyLCBidXQgaXQgcmV0dXJuZWQgYW4gZXJyb3Jcblx0XHRcdFx0fVxuXHRcdFx0fTtcblx0XHRcdHJlcXVlc3Qub25lcnJvciA9IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHQvLyBUaGVyZSB3YXMgYSBjb25uZWN0aW9uIGVycm9yIG9mIHNvbWUgc29ydFxuXHRcdFx0fTtcblxuXHRcdFx0cmVxdWVzdC5zZW5kKCk7XG5cdFx0fSk7XG5cdH1cbn1cblxuLy9PcGVuIHRoZSBvdmVybGF5IGlmIGFuIGFsYnVtIGlzIGNsaWNrZWRcbmZ1bmN0aW9uIGNsaWNrQWxidW1zKCl7XG5cdHZhciBhbGJ1bXMgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKFwiYWxidW1Cb3hcIik7XG5cblx0Zm9yICh2YXIgaSA9IDA7IGkgPCBhbGJ1bXMubGVuZ3RoOyBpKyspIHtcblx0XHRhbGJ1bXNbaV0ucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbigpe1xuXHRcdFx0b3BlbkFsYnVtT3ZlcmxheSh0aGlzLmlkKTtcblx0XHR9KTtcblx0XHRhbGJ1bXNbaV0uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbigpe1xuXHRcdFx0b3BlbkFsYnVtT3ZlcmxheSh0aGlzLmlkKTtcblx0XHR9KTtcblx0fVxufVxuXG5mdW5jdGlvbiBvcGVuQWxidW1PdmVybGF5KHRoaXNJRCl7XG5cblx0Ly9Mb29rIHVwIGFsYnVtIGJ5IElEXG5cdHZhciByZXF1ZXN0ID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XG5cdC8vY29uc29sZS5sb2coJy4uL2FsYnVtLXRyYWNrcy8nK3RoaXNJRCk7XG5cdHJlcXVlc3Qub3BlbignR0VUJywgJy9hbGJ1bS10cmFja3MvJyt0aGlzSUQsIHRydWUpO1xuXG5cblx0cmVxdWVzdC5vbmxvYWQgPSBmdW5jdGlvbigpIHtcblx0XHRpZiAodGhpcy5zdGF0dXMgPj0gMjAwICYmIHRoaXMuc3RhdHVzIDwgNDAwKSB7XG5cdFx0XHQvLyBTdWNjZXNzIVxuXHRcdFx0dmFyIGRhdGEgPSBKU09OLnBhcnNlKHRoaXMucmVzcG9uc2UpO1xuXHRcdFx0Y29uc29sZS5sb2coZGF0YSk7XG5cblx0XHRcdC8vTG9hZCBpbiBEYXRhIHRvIE92ZXJsYXlcblx0XHRcdHZhciB0aXRsZSA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoXCJvbEFsYnVtVGl0bGVcIik7XG5cdFx0XHR0aXRsZVswXS5pbm5lckhUTUwgPSBkYXRhLm5hbWU7XG5cblx0XHRcdC8vbGluayB0byBhbGJ1bSBwYWdlXG5cdFx0XHRjb25zb2xlLmxvZyhkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKFwib2xBbGJ1bUxpbmtcIilbMF0pO1xuXHRcdFx0dmFyIGN1cnJlbnRVUkwgPSB3aW5kb3cubG9jYXRpb24uaHJlZjtcblx0XHRcdGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoXCJvbEFsYnVtTGlua1wiKVswXS5pbm5lckhUTUwgPSAnPGEgaHJlZiA9XCInK2N1cnJlbnRVUkwrJy9hbGJ1bXMvJytkYXRhLl9pZCsnXCI+R28gdG8gYWxidW0gcGFnZTwvYT4nO1xuXG5cdFx0XHQvL2FsYnVtIGNvbXBvc2VyXG5cdFx0XHRkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKFwib2xBbGJ1bUNvbXBvc2VyXCIpWzBdLmlubmVySFRNTCA9IGRhdGEuY29tcG9zZXJzO1xuXG5cdFx0XHRmb3IgKCB2YXIgaSBpbiBkYXRhLnRyYWNrcyl7XG5cdFx0XHRcdGNvbnNvbGUubG9nKGRhdGEudHJhY2tzW2ldLm5hbWUpO1xuXHRcdFx0XHR2YXIgbmV3VHJhY2sgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKFwib2xUcmFjayBwXCIpWzBdLmNsb25lTm9kZSh0cnVlKTtcblx0XHRcdFx0bmV3VHJhY2suY2xhc3NOYW1lID0gXCJvbFRyYWNrXCI7XG5cblx0XHRcdFx0Ly90cmFjayBuYW1lIFxuXHRcdFx0XHR2YXIgbmFtZSA9IG5ld1RyYWNrLmdldEVsZW1lbnRzQnlDbGFzc05hbWUoXCJ0b3BUcmFja05hbWVcIik7XG5cdFx0XHRcdG5hbWVbMF0uaW5uZXJIVE1MID0gZGF0YS50cmFja3NbaV0ubmFtZTtcblxuXHRcdFx0XHQvL3RyYWNrIGFydGlzdHNcblx0XHRcdFx0dmFyIGFydGlzdHMgPSBuZXdUcmFjay5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKFwidG9wVHJhY2tBcnRpc3Qgb2xcIik7XG5cdFx0XHRcdC8vY29uc29sZS5sb2coYXJ0aXN0cyk7XG5cdFx0XHRcdGFydGlzdHNbMF0uaW5uZXJIVE1MID0gZGF0YS50cmFja3NbaV0uYXJ0aXN0cztcblxuXHRcdFx0XHQvL3RyYWNrIGNvbXBvc2VyXG5cdFx0XHRcdHZhciBjb21wb3NlciA9IG5ld1RyYWNrLmdldEVsZW1lbnRzQnlDbGFzc05hbWUoXCJjb21wb3NlciBvbFwiKTtcblx0XHRcdFx0Y29tcG9zZXJbMF0uc2V0QXR0cmlidXRlKCdocmVmJyxkYXRhLnRyYWNrc1tpXS5jb21wb3NlckxpbmspO1xuXHRcdFx0XHRjb21wb3NlclswXS5pbm5lckhUTUwgPSBkYXRhLnRyYWNrc1tpXS5jb21wb3NlcjtcblxuXHRcdFx0XHQvL3BsYXkvcGF1c2Vcblx0XHRcdFx0dmFyIHBsYXkgPSBuZXdUcmFjay5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKFwicGxheVwiKTtcblx0XHRcdFx0cGxheVswXS5pZCA9IFwiYVwiK2RhdGEudHJhY2tzW2ldLklEO1xuXHRcdFx0XHRwbGF5WzBdLnNldEF0dHJpYnV0ZSgnZGF0YS1wcmV2aWV3JyxkYXRhLnRyYWNrc1tpXS5wcmV2aWV3X3VybCk7XG5cdFx0XHRcdHZhciBwYXVzZSA9IG5ld1RyYWNrLmdldEVsZW1lbnRzQnlDbGFzc05hbWUoXCJwYXVzZVwiKTtcblx0XHRcdFx0cGF1c2VbMF0uaWQgPSBcImFcIitkYXRhLnRyYWNrc1tpXS5JRDtcblxuXHRcdFx0XHRkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcub2xBbGJ1bUJvZHknKVswXS5hcHBlbmRDaGlsZChuZXdUcmFjayk7XG5cdFx0XHR9XG5cdFx0XHQvL2dldCB0aGVtIHRvIHBsYXlcblx0XHRcdGNvbnNvbGUubG9nKFwiY2xpY2sgdG8gcGxheVwiKTtcblx0XHRcdHRyYWNrUHJldmlldygpO1xuXHRcdFx0Y29uc29sZS5sb2coZGF0YSk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdC8vIFdlIHJlYWNoZWQgb3VyIHRhcmdldCBzZXJ2ZXIsIGJ1dCBpdCByZXR1cm5lZCBhbiBlcnJvclxuXG5cdFx0fVxuXHR9O1xuXG5cdHJlcXVlc3Qub25lcnJvciA9IGZ1bmN0aW9uKCkge1xuXHRcdC8vIFRoZXJlIHdhcyBhIGNvbm5lY3Rpb24gZXJyb3Igb2Ygc29tZSBzb3J0XG5cdH07XG5cblx0cmVxdWVzdC5zZW5kKCk7XG5cblx0Ly9PcGVuIHVwIG92ZXJsYXlcblx0Y29uc29sZS5sb2codGhpc0lEKTtcblx0dmFyIGJnID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShcImJnT3ZlcmxheVwiKTtcblx0aSA9IGJnLmxlbmd0aDtcblx0d2hpbGUgKCBpLS0gKXtcblx0XHRiZ1tpXS5jbGFzc05hbWUgPSBcImJnT3ZlcmxheSBmYWRlaW5cIjtcblx0fVxuXHR2YXIgYWwgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKFwiYWxidW1PdmVybGF5XCIpO1xuXHRpID0gYWwubGVuZ3RoO1xuXHR3aGlsZSAoIGktLSApe1xuXHRcdGFsW2ldLmNsYXNzTmFtZSA9IFwiYWxidW1PdmVybGF5IHNsaWRlb3V0XCI7XG5cdH1cbn1cblxuZnVuY3Rpb24gY2xvc2VPdmVybGF5KCl7XG5cdHZhciBiZyA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoXCJiZ092ZXJsYXlcIik7XG5cdGJnWzBdLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oKXtcblx0XHRjbG9zZSgpO1xuXHR9KTtcblxuXHR2YXIgY2xvc2VXaGl0ZSA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ2Nsb3NlV2hpdGUnKTtcblx0Y2xvc2VXaGl0ZVswXS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKCl7XG5cdFx0Y2xvc2UoKTtcblx0fSlcblxuXHRmdW5jdGlvbiBjbG9zZSgpe1xuXHRcdC8vcmVtb3ZlIGFsbCB0cmFja3Ncblx0XHRjb25zb2xlLmxvZyhcInJlbW92ZSB0cmFja3NcIik7XG5cdFx0ZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLm9sVHJhY2s6bm90KC5wKScpLnJlbW92ZSgpO1xuXG5cdFx0dmFyIGJnID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShcImJnT3ZlcmxheVwiKTtcblx0XHRpID0gYmcubGVuZ3RoO1xuXHRcdHdoaWxlICggaS0tICl7XG5cdFx0XHRiZ1tpXS5jbGFzc05hbWUgPSBcImJnT3ZlcmxheSBoaWRkZW5cIjtcblx0XHR9XG5cdFx0dmFyIGFsID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShcImFsYnVtT3ZlcmxheVwiKTtcblx0XHRpID0gYWwubGVuZ3RoO1xuXHRcdHdoaWxlICggaS0tICl7XG5cdFx0XHRhbFtpXS5jbGFzc05hbWUgPSBcImFsYnVtT3ZlcmxheSBzbGlkZWluXCI7XHRcdFxuXHR9XG5cblx0fVxufVxuXG4vL3N0YXJ0IGEgbG9hZGluZyBhbmltYXRpb25cbmZ1bmN0aW9uIHN0YXJ0TG9hZGVyKGVsZW1lbnQpe1xuXHQvL2NvbnNvbGUubG9nKGVsZW1lbnQpO1xuXHRlbGVtZW50LmNsYXNzTmFtZSA9IFwiYnV0dG9uIGxvYWRpbmdcIjtcblx0dmFyIGJ1dHRvbklubmVyID0gZWxlbWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCdidXR0b25Jbm5lcicpO1xuXHRidXR0b25Jbm5lclswXS5jbGFzc05hbWUgPSBcImJ1dHRvbklubmVyIGhpZGRlblwiO1xuXHR2YXIgbG9hZGVyID0gZWxlbWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKFwibG9hZGVyXCIpO1xuXHRsb2FkZXJbMF0uY2xhc3NOYW1lID0gXCJsb2FkZXJcIjsgLy9zaG93IGxvYWRlclx0XG59XG5cbi8vc3RvcCBhIGxvYWRpbmcgYW5pbWF0aW9uXG5mdW5jdGlvbiBzdG9wTG9hZGVyKGVsZW1lbnQpe1xuXHRlbGVtZW50LmNsYXNzTmFtZSA9IFwiYnV0dG9uXCI7XG5cdHZhciBidXR0b25Jbm5lciA9IGVsZW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgnYnV0dG9uSW5uZXInKTtcblx0YnV0dG9uSW5uZXJbMF0uY2xhc3NOYW1lID0gXCJidXR0b25Jbm5lclwiO1xuXHR2YXIgbG9hZGVyID0gZWxlbWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKFwibG9hZGVyXCIpO1xuXHRsb2FkZXJbMF0uY2xhc3NOYW1lID0gXCJsb2FkZXIgaGlkZGVuXCI7IC8vc2hvdyBsb2FkZXJcdFxufVxuXG4vL3JlbW92ZSB0aGUgYnV0dG9uIGlmIG5vIGxvbmdlciBuZWVkZWRcbmZ1bmN0aW9uIHJlbW92ZUJ1dHRvbihlbGVtZW50KXtcblx0ZWxlbWVudC5yZW1vdmUoKTtcbn1cblxuZnVuY3Rpb24gY2FsbEFQSSh1cmwsIHNlYXJjaFN0cmluZywgY2FsbGJhY2spe1xuXHQvL0dldCBhcnRpc3RzXG5cdHZhciByZXF1ZXN0ID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XG5cdGNvbnNvbGUubG9nKCcvJyt1cmwrJy8nK3NlYXJjaFN0cmluZyk7XG5cdHJlcXVlc3Qub3BlbignR0VUJywgJy8nK3VybCArICcvJyArIHNlYXJjaFN0cmluZywgdHJ1ZSk7XG5cdHJlcXVlc3Qub25sb2FkID0gZnVuY3Rpb24oKSB7XG5cdFx0aWYgKHRoaXMuc3RhdHVzID49IDIwMCAmJiB0aGlzLnN0YXR1cyA8IDQwMCkge1xuXHRcdFx0dmFyIGRhdGEgPSBKU09OLnBhcnNlKHRoaXMucmVzcG9uc2UpO1xuXHRcdFx0Y29uc29sZS5sb2coZGF0YSk7XG5cdFx0XHRjYWxsYmFjayhkYXRhKTtcblx0XHR9ZWxzZXtcblx0XHRcdGNvbnNvbGUubG9nKHRoaXMuc3RhdHVzKTtcblx0XHR9XG5cdH07XG5cdHJlcXVlc3Qub25lcnJvciA9IGZ1bmN0aW9uKCkge1xuXHRcdGNvbnNvbGUubG9nKFwidGhlcmUgaGFzIGJlZW4gYW4gZXJyb3JcIik7XG5cdFx0Ly8gVGhlcmUgd2FzIGEgY29ubmVjdGlvbiBlcnJvciBvZiBzb21lIHNvcnRcblx0fTtcblx0cmVxdWVzdC5zZW5kKCk7XHRcbn1cblxuZnVuY3Rpb24gdXBkYXRlQ2FsbCh1cmwsIGRhdGEsIElELCBjYWxsYmFjayl7XG5cdHZhciBodHRwID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XG5cdHZhciB1cmwgPSAnLycrdXJsKycvJytJRDtcblx0aHR0cC5vcGVuKFwiUE9TVFwiLCB1cmwsIHRydWUpO1xuXG5cdC8vU2VuZCB0aGUgcHJvcGVyIGhlYWRlciBpbmZvcm1hdGlvbiBhbG9uZyB3aXRoIHRoZSByZXF1ZXN0XG5cdGh0dHAuc2V0UmVxdWVzdEhlYWRlcihcIkNvbnRlbnQtdHlwZVwiLCBcImFwcGxpY2F0aW9uL2pzb25cIik7XG5cblx0aHR0cC5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBmdW5jdGlvbigpIHsvL0NhbGwgYSBmdW5jdGlvbiB3aGVuIHRoZSBzdGF0ZSBjaGFuZ2VzLlxuXHQgICAgaWYoaHR0cC5yZWFkeVN0YXRlID09IDQgJiYgaHR0cC5zdGF0dXMgPT0gMjAwKSB7XG5cdCAgICBcdFx0Ly92YXIgZGF0YSA9IEpTT04ucGFyc2UodGhpcy5yZXNwb25zZSk7XG5cdCAgICAgICAgY2FsbGJhY2sodGhpcy5yZXNwb25zZSk7XG5cdCAgICB9XG5cdH1cblx0aHR0cC5zZW5kKGRhdGEpO1xufVxuXG4vL0Z1bmN0aW9uIHRvIGFkZCBpbiBjb21wb3NlcnMgdG8gbGlzdCBwYWdlc1xuZnVuY3Rpb24gYWRkR3JpZEl0ZW1zKGRhdGEpe1xuXHRjb25zb2xlLmxvZyhkYXRhKTtcblx0Zm9yICggaSA9IDAgOyBpIDwgZGF0YS5sZW5ndGggOyBpKysgKXtcblx0XHR2YXIgY3VycmVudENvbXBvc2VycyA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoXCJncmlkLWl0ZW1cIik7XG5cdFx0dmFyIG5ld0dyaWRJdGVtID0gY3VycmVudENvbXBvc2Vyc1swXS5jbG9uZU5vZGUodHJ1ZSk7XG5cdFx0Ly9jb25zb2xlLmxvZyhuZXdHcmlkSXRlbSk7XG5cdFx0Ly9JRFxuXHRcdG5ld0dyaWRJdGVtLnNldEF0dHJpYnV0ZSgnaWQnLCBkYXRhW2ldLl9pZCk7XG5cdFx0Ly9iYWNrZ3JvdW5kIGltYWdlXG5cdFx0bmV3R3JpZEl0ZW0uc2V0QXR0cmlidXRlKCdzdHlsZScsIGRhdGFbaV0uaW1hZ2VzKTtcblx0XHQvL1RpdGxlXG5cdFx0dmFyIHRpdGxlID0gbmV3R3JpZEl0ZW0uZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShcImNvbXBvc2VyXCIpWzBdO1xuXHRcdHRpdGxlLmlubmVySFRNTCA9IGRhdGFbaV0ubmFtZTtcblx0XHQvL2xpbmtcblx0XHR2YXIgbGluayA9IG5ld0dyaWRJdGVtLmdldEVsZW1lbnRzQnlDbGFzc05hbWUoXCJyZWxhdGVkQ29tcG9zZXJMaW5rXCIpWzBdO1xuXHRcdGxpbmsuc2V0QXR0cmlidXRlKCdocmVmJywgZGF0YVtpXS5ocmVmKTtcblxuXHRcdHZhciBncmlkID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgnZ3JpZCcpWzBdO1xuXHRcdGdyaWQuYXBwZW5kQ2hpbGQobmV3R3JpZEl0ZW0pO1x0XG5cdH1cbn1cblxuXG5cbi8vTWFrZSBpdCBlYXNpZXIgdG8gcmVtb3ZlIERPTSBlbGVtZW50c1xuXG5FbGVtZW50LnByb3RvdHlwZS5yZW1vdmUgPSBmdW5jdGlvbigpIHtcbiAgICB0aGlzLnBhcmVudEVsZW1lbnQucmVtb3ZlQ2hpbGQodGhpcyk7XG59O1xuTm9kZUxpc3QucHJvdG90eXBlLnJlbW92ZSA9IEhUTUxDb2xsZWN0aW9uLnByb3RvdHlwZS5yZW1vdmUgPSBmdW5jdGlvbigpIHtcbiAgICBmb3IodmFyIGkgPSB0aGlzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XG4gICAgICAgIGlmKHRoaXNbaV0gJiYgdGhpc1tpXS5wYXJlbnRFbGVtZW50KSB7XG4gICAgICAgICAgICB0aGlzW2ldLnBhcmVudEVsZW1lbnQucmVtb3ZlQ2hpbGQodGhpc1tpXSk7XG4gICAgICAgIH1cbiAgICB9XG59O1xuIiwiZnVuY3Rpb24gY2hhbmdlTGlzdGVuKCl7XG5cdHZhciBJRCA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ2lkLWhvbGRlcicpWzBdLmlubmVySFRNTDtcblx0dmFyIGlucHV0cyA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCdpbnB1dCcpO1xuXHR2YXIgdGV4dGFyZWFzID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ3RleHRhcmVhJyk7XG5cblx0Zm9yICggaSA9IDAgOyBpIDwgaW5wdXRzLmxlbmd0aCA7IGkrKyApe1xuXHRcdGlucHV0c1tpXS5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsIGZ1bmN0aW9uIChldnQpIHtcblx0XHRcdGdldEZvcm0oSUQpO1xuXHRcdH0pO1xuXHR9XG5cblx0Zm9yICggaSA9IDAgOyBpIDwgdGV4dGFyZWFzLmxlbmd0aCA7IGkrKyApe1xuXHRcdC8vY29uc29sZS5sb2codGV4dGFyZWFzW2ldKTtcblx0XHR0ZXh0YXJlYXNbaV0uYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCBmdW5jdGlvbiAoZXZ0KSB7XG5cdFx0XHRnZXRGb3JtKElEKTtcblx0XHR9KTtcblx0fVxufVxuXG5mdW5jdGlvbiBnZXRGb3JtKElEKXtcblx0dmFyIGlucHV0cyA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCdpbnB1dCcpO1xuXHR2YXIgdGV4dGFyZWFzID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ3RleHRhcmVhJyk7XG5cdHZhciBkYXRhID0ge307XG5cdGZvciAoIGogPSAwIDsgaiA8IGlucHV0cy5sZW5ndGggOyBqKysgKXtcblx0XHQvL2NvbnNvbGUubG9nKCBpbnB1dHNbal0uY2xhc3NOYW1lICsgXCIgXCIrIGlucHV0c1tqXS52YWx1ZSApO1xuXHRcdGRhdGFbaW5wdXRzW2pdLmNsYXNzTmFtZV0gPSBpbnB1dHNbal0udmFsdWU7XG5cdH1cblx0Zm9yICggaiA9IDAgOyBqIDwgdGV4dGFyZWFzLmxlbmd0aCA7IGorKyApe1xuXHRcdGRhdGFbdGV4dGFyZWFzW2pdLmNsYXNzTmFtZV0gPSB0ZXh0YXJlYXNbal0udmFsdWU7XG5cdH1cblx0Y29uc29sZS5sb2coZGF0YSk7XG5cdGRhdGEgPSBKU09OLnN0cmluZ2lmeShkYXRhKTtcblx0dXBkYXRlQ2FsbCgnY29tcG9zZXItdXBkYXRlJywgZGF0YSwgSUQsIGdldFJlc3BvbnNlKTtcblxufVxuXG5mdW5jdGlvbiBnZXRSZXNwb25zZShkYXRhKXtcblx0Y29uc29sZS5sb2coJ3Jlc3BvbnNlOiAnKyBkYXRhICk7XG59IiwiZnVuY3Rpb24gY2xpY2tBbGJ1bVBsYXkoKXtcblx0dmFyIGFsYnVtUGxheSA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ2ZlYXR1cmVkSW5uZXJQbGF5JylbMF07XG5cdGFsYnVtUGxheS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKCl7XG5cdFx0Ly9hbGVydCgnY2xpY2snKTtcblx0XHRhdWRpby5zcmMgPSB0aGlzLmRhdGFzZXQucHJldmlldztcblx0XHRhdWRpby5wbGF5KCk7XG5cdFx0dGhpcy5jbGFzc05hbWUgPSBcImZlYXR1cmVkSW5uZXJQbGF5IGhpZGRlblwiO1xuXHRcdHZhciBzaG93UGF1c2UgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCdmZWF0dXJlZElubmVyUGF1c2UnKVswXTtcblx0XHRzaG93UGF1c2UuY2xhc3NOYW1lID0gXCJmZWF0dXJlZElubmVyUGF1c2VcIjtcblxuXHRcdHNldFRpbWVvdXQoZnVuY3Rpb24oKXtcblx0XHRcdHZhciBzaG93UGxheSA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ2ZlYXR1cmVkSW5uZXJQbGF5JylbMF07XG5cdFx0XHRzaG93UGxheS5jbGFzc05hbWUgPSAnZmVhdHVyZWRJbm5lclBsYXknO1xuXHRcdFx0c2hvd1BhdXNlLmNsYXNzTmFtZSA9IFwiZmVhdHVyZWRJbm5lclBhdXNlIGhpZGRlblwiO1xuXHRcdH0sMzAwMDApO1xuXHR9KTtcbn1cblxuZnVuY3Rpb24gY2xpY2tBbGJ1bVBhdXNlKCl7XG5cdHZhciBhbGJ1bVBhdXNlID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgnZmVhdHVyZWRJbm5lclBhdXNlJylbMF07XG5cdGFsYnVtUGF1c2UuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbigpe1xuXHRcdGF1ZGlvLnBhdXNlKCk7IFxuXHRcdGFsYnVtUGF1c2UuY2xhc3NOYW1lID0gJ2ZlYXR1cmVkSW5uZXJQYXVzZSBoaWRkZW4nO1xuXHRcdHZhciBzaG93UGxheSA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ2ZlYXR1cmVkSW5uZXJQbGF5JylbMF07XG5cdFx0c2hvd1BsYXkuY2xhc3NOYW1lID0gJ2ZlYXR1cmVkSW5uZXJQbGF5Jztcblx0fSk7XG59IiwiZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIkRPTUNvbnRlbnRMb2FkZWRcIiwgZnVuY3Rpb24oZXZlbnQpIHtcblxuXHRvcGVuQ2xvc2UoKTtcblx0aW5wdXRMaXN0ZW4oKTtcbiB9KTtcblxuLy8gb3BlbmluZyBhbmQgY2xvc2luZyB0aGUgc2VhcmNoIG92ZXJsYXlcbmZ1bmN0aW9uIG9wZW5DbG9zZSgpe1xuXHR2YXIgc2VhcmNoT3BlbiA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ3NlYXJjaCcpWzBdO1xuXHR2YXIgc2VhcmNoQ2xvc2UgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCdjbG9zZScpWzBdO1xuXHR2YXIgc2VhcmNoT3ZlcmxheSA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ3NlYXJjaE92ZXJsYXknKVswXTtcblx0c2VhcmNoT3Blbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKCl7XG5cdFx0c2VhcmNoT3ZlcmxheS5jbGFzc05hbWUgPSAnc2VhcmNoT3ZlcmxheSBzZWFyY2hTbGlkZWluJztcblx0fSk7XG5cdHNlYXJjaENsb3NlLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oKXtcblx0XHRjbGVhclJlc3VsdHMoKTtcblx0XHRzZWFyY2hPdmVybGF5LmNsYXNzTmFtZSA9ICdzZWFyY2hPdmVybGF5IHNlYXJjaFNsaWRlb3V0Jztcblx0fSk7XG59XG5cbi8vTGlzdGVuaW5nIGZvciB0eXBpbmdcbmZ1bmN0aW9uIGlucHV0TGlzdGVuKCl7XG5cdHZhciBzZWFyY2hJbnB1dCA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ3NlYXJjaElucHV0JylbMF07XG5cdFxuXHR2YXIgdGltZXIgPSBudWxsO1xuXHRzZWFyY2hJbnB1dC5vbmtleXVwID0gZnVuY3Rpb24oKSB7XG4gICAgaWYgKHRpbWVyKSB7XG4gICAgICAgIHdpbmRvdy5jbGVhclRpbWVvdXQodGltZXIpO1xuICAgIH1cbiAgICB0aW1lciA9IHdpbmRvdy5zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7XG5cdFx0XHR2YXIgc2VhcmNoU3RyaW5nID0gc2VhcmNoSW5wdXQudmFsdWU7XG5cdFx0XHRpZihzZWFyY2hTdHJpbmcubGVuZ3RoPjIpe1xuXHRcdFx0XHRjbGVhclJlc3VsdHMoKTtcblx0XHRcdFx0c2VhcmNoKHNlYXJjaFN0cmluZyk7XHRcdFxuXHRcdFx0fWVsc2V7XG5cdFx0XHRcdGNsZWFyUmVzdWx0cygpO1xuXHRcdFx0fVxuXG4gICAgfSwgNTAwKTtcblx0fTtcbn1cblxuLy9PbmNlIHlvdSB1cGRhdGUgdGhlIHNlYXJjaCwgeW91IGhhdmUgdG8gY2xlYXIgdGhlIHJlc3VsdHNcbmZ1bmN0aW9uIGNsZWFyUmVzdWx0cygpe1xuXG5cdC8vcmVtb3ZlIGV4aXN0aW5nIHJlc3VsdHNcblx0dmFyIHRvUmVtb3ZlID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgndG9SZW1vdmUnKTtcblx0Zm9yICggdmFyIGkgaW4gdG9SZW1vdmUgKXtcblx0XHR0b1JlbW92ZS5yZW1vdmUoKTtcblx0fVxuXG5cdC8vaGlkZSBzZWN0aW9uIHRpdGxlc1xuXHR2YXIgdGl0bGVzID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgnc2VhcmNoVGl0bGUnKTtcblx0Ly9jb25zb2xlLmxvZyh0aXRsZXMpO1xuXHRmb3IgKCBpIGluIHRpdGxlcyl7XG5cdFx0dGl0bGVzW2ldLmNsYXNzTmFtZSA9ICdzZWFyY2hUaXRsZSBoaWRkZW4nO1xuXHR9XG5cblx0Ly9oaWRlIHJlc3VsdHMgcGFuZWxcblx0dmFyIHJlc3VsdCA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ3Jlc3VsdCcpO1xuXHRyZXN1bHRbMF0uY2xhc3NOYW1lID0gJ3Jlc3VsdCBoaWRkZW4nO1xuXG59XG5cbmZ1bmN0aW9uIHNob3dSZXN1bHRzKCl7XG5cdGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ3Jlc3VsdCcpWzBdLmNsYXNzTmFtZT0ncmVzdWx0Jztcbn1cblxuZnVuY3Rpb24gc2VhcmNoKHNlYXJjaFN0cmluZyl7XG5cdC8vY29uc29sZS5sb2coJ3ZhbHVlID0gJytzZWFyY2hTdHJpbmcpO1xuXHRcdGNhbGxBUEkoJ3NlYXJjaC1jb21wb3Nlcicsc2VhcmNoU3RyaW5nLCBwb3B1bGF0ZUNvbXBvc2VyKTtcblx0XHRjYWxsQVBJKCdzZWFyY2gtYXJ0aXN0JyxzZWFyY2hTdHJpbmcsIHBvcHVsYXRlQXJ0aXN0KTtcblx0XHRjYWxsQVBJKCdzZWFyY2gtYWxidW0nLHNlYXJjaFN0cmluZywgcG9wdWxhdGVBbGJ1bSk7XG5cdFx0Y2FsbEFQSSgnc2VhcmNoLXRyYWNrJyxzZWFyY2hTdHJpbmcsIHBvcHVsYXRlVHJhY2spO1xuXHRcdC8vY2FsbEFQSSgnc2VhcmNoLWNhdGFsb2d1ZScsIHNlYXJjaFN0cmluZywgcG9wdWxhdGVDYXRhbG9ndWUpO1xuXG59XG5cbmZ1bmN0aW9uIHBvcHVsYXRlQ29tcG9zZXIoZGF0YSl7XG5cdC8vY29uc29sZS5sb2coXCJDb21wb3NlclwiKTtcblx0Ly9jb25zb2xlLmxvZyhkYXRhKTtcblx0Zm9yIChpID0gMCA7IGkgPCBkYXRhLmxlbmd0aCA7IGkrKyApe1xuXHRcdHZhciBjb21wb3NlciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5zZWFyY2hMaW5rLmNvbXBvc2VyLmhpZGRlbicpWzBdLmNsb25lTm9kZSh0cnVlKTtcblx0XHRjb21wb3Nlci5jbGFzc05hbWUgPSAnc2VhcmNoTGluayBjb21wb3NlciB0b1JlbW92ZSc7XG5cblx0XHRjb21wb3Nlci5zZXRBdHRyaWJ1dGUoJ2hyZWYnLCcvY29tcG9zZXJzLycrZGF0YVtpXS5uYW1lKTtcblx0XHRjb21wb3Nlci5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCdjb21wb3NlclNlYXJjaE5hbWUnKVswXS5pbm5lckhUTUwgPSBkYXRhW2ldLm5hbWU7XG5cdFx0Y29tcG9zZXIuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgnY29tcG9zZXJTZWFyY2hJbWFnZScpWzBdLnNldEF0dHJpYnV0ZSgnc3R5bGUnLCdiYWNrZ3JvdW5kLWltYWdlOnVybChcIicrZGF0YVtpXS5pbWFnZVNtYWxsKydcIik7Jyk7XG5cdFx0aWYoZGF0YVtpXS5saWZlKXtcblx0XHRcdGNvbXBvc2VyLmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ2NvbXBvc2VyU2VhcmNoTGlmZScpWzBdLmlubmVySFRNTCA9IGRhdGFbaV0ubGlmZVswXS5iaXJ0aFllYXIgKyBcIiAtIFwiKyBkYXRhW2ldLmxpZmVbMF0uZGVhdGhZZWFyO1xuXHRcdH1cblx0XHRcblxuXHRcdHZhciBwYXJlbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcucmVzdWx0cy5jb21wb3NlcicpWzBdO1xuXHRcdHZhciByZWZlcmVuY2UgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuc2VhcmNoTGluay5jb21wb3Nlci5oaWRkZW4nKVswXTtcblx0XHRwYXJlbnQuaW5zZXJ0QmVmb3JlKGNvbXBvc2VyLCByZWZlcmVuY2UpO1xuXHR9XG5cdFxuXHQvL3Nob3cgc2VjdGlvbiB0aXRsZSArIHJlc3VsdHNcblx0aWYoZGF0YS5sZW5ndGg+MCl7XG5cdFx0c2hvd1Jlc3VsdHMoKTtcblx0XHRkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcjY29tcG9zZXJzLnNlYXJjaFRpdGxlJylbMF0uY2xhc3NOYW1lID0gJ3NlYXJjaFRpdGxlJztcblx0fVxuXG59XG5cbmZ1bmN0aW9uIHBvcHVsYXRlQXJ0aXN0KGRhdGEpe1xuXHQvL2NvbnNvbGUubG9nKFwiYXJ0aXN0c1wiKTtcblx0Ly9jb25zb2xlLmxvZyhkYXRhKTtcblx0Zm9yIChpID0gMCA7IGkgPCBkYXRhLmxlbmd0aCA7IGkrKyl7XG5cdFx0dmFyIGFydGlzdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5zZWFyY2hMaW5rLmFydGlzdC5oaWRkZW4nKVswXS5jbG9uZU5vZGUodHJ1ZSk7XG5cdFx0YXJ0aXN0LmNsYXNzTmFtZSA9ICdzZWFyY2hMaW5rIGFydGlzdCB0b1JlbW92ZSc7XG5cblx0XHRhcnRpc3Quc2V0QXR0cmlidXRlKCdocmVmJywnL2FydGlzdHMvJytkYXRhW2ldLm5hbWUpO1xuXHRcdGFydGlzdC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCdhcnRpc3RTZWFyY2hOYW1lJylbMF0uaW5uZXJIVE1MID0gZGF0YVtpXS5uYW1lO1xuXHRcdGFydGlzdC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCdhcnRpc3RTZWFyY2hJbWFnZScpWzBdLnNldEF0dHJpYnV0ZSgnc3R5bGUnLCdiYWNrZ3JvdW5kLWltYWdlOnVybChcIicrZGF0YVtpXS5pbWFnZVNtYWxsKydcIik7Jyk7XHRcblxuXHRcdHZhciBwYXJlbnQxID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnJlc3VsdHMuYXJ0aXN0JylbMF07XG5cdFx0dmFyIHJlZmVyZW5jZTEgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuc2VhcmNoTGluay5hcnRpc3QuaGlkZGVuJylbMF07XG5cdFx0XG5cdFx0Ly9jb25zb2xlLmxvZyhwYXJlbnQxKTtcblx0XHQvL2NvbnNvbGUubG9nKGFydGlzdCk7XG5cdFx0Ly9jb25zb2xlLmxvZyhyZWZlcmVuY2UxKTtcblx0XHQvL2luc2VydEFmdGVyKGFydGlzdCwgcmVmZXJlbmNlKTtcblx0XHRwYXJlbnQxLmluc2VydEJlZm9yZShhcnRpc3QsIHJlZmVyZW5jZTEpO1xuXHRcdFxuXHR9XG5cdFxuXHQvL3Nob3cgc2VjdGlvbiB0aXRsZVxuXHRpZihkYXRhLmxlbmd0aD4wKXtcblx0XHRzaG93UmVzdWx0cygpO1xuXHRcdGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJyNhcnRpc3RzLnNlYXJjaFRpdGxlJylbMF0uY2xhc3NOYW1lID0gJ3NlYXJjaFRpdGxlJztcblx0fVxufVxuXG5mdW5jdGlvbiBwb3B1bGF0ZUFsYnVtKGRhdGEpe1xuXHQvL2NvbnNvbGUubG9nKFwiYWxidW1zXCIpO1xuXHQvL2NvbnNvbGUubG9nKGRhdGEpO1xuXHRmb3IgKGkgPSAwIDsgaSA8IGRhdGEubGVuZ3RoIDsgaSsrKXtcblx0XHR2YXIgYWxidW0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuc2VhcmNoTGluay5hbGJ1bS5oaWRkZW4nKVswXS5jbG9uZU5vZGUodHJ1ZSk7XG5cdFx0YWxidW0uY2xhc3NOYW1lID0gJ3NlYXJjaExpbmsgYWxidW0gdG9SZW1vdmUnO1xuXG5cdFx0YWxidW0uc2V0QXR0cmlidXRlKCdocmVmJywnL2FsYnVtcy8nK2RhdGFbaV0uX2lkKTtcblx0XHRhbGJ1bS5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCdhbGJ1bVNlYXJjaE5hbWUnKVswXS5pbm5lckhUTUwgPSBkYXRhW2ldLm5hbWU7XG5cdFx0YWxidW0uZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgnYWxidW1TZWFyY2hJbWFnZScpWzBdLnNldEF0dHJpYnV0ZSgnc3R5bGUnLCdiYWNrZ3JvdW5kLWltYWdlOnVybChcIicrZGF0YVtpXS5pbWFnZSsnXCIpOycpO1xuXHRcdFxuXHRcdHZhciBwYXJlbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcucmVzdWx0cy5hbGJ1bScpWzBdO1xuXHRcdHZhciByZWZlcmVuY2UgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuc2VhcmNoTGluay5hbGJ1bS5oaWRkZW4nKVswXTtcblx0XHRwYXJlbnQuaW5zZXJ0QmVmb3JlKGFsYnVtLCByZWZlcmVuY2UpO1xuXHR9XG5cdFxuXHQvL3Nob3cgc2VjdGlvbiB0aXRsZVxuXHRpZihkYXRhLmxlbmd0aD4wKXtcblx0XHRzaG93UmVzdWx0cygpO1xuXHRcdGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJyNhbGJ1bXMuc2VhcmNoVGl0bGUnKVswXS5jbGFzc05hbWUgPSAnc2VhcmNoVGl0bGUnO1xuXHR9XG59XG5cbmZ1bmN0aW9uIHBvcHVsYXRlVHJhY2soZGF0YSl7XG5cdC8vY29uc29sZS5sb2coXCJ0cmFja3NcIik7XG5cdC8vY29uc29sZS5sb2coZGF0YSk7XG5cdGZvciAoaSA9IDAgOyBpIDwgZGF0YS5sZW5ndGggOyBpKyspe1xuXHRcdHZhciB0cmFjayA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5zZWFyY2hUcmFjay5oaWRkZW4nKVswXS5jbG9uZU5vZGUodHJ1ZSk7XG5cdFx0dHJhY2suY2xhc3NOYW1lID0gJ3NlYXJjaFRyYWNrIHRvUmVtb3ZlJztcblxuXHRcdHRyYWNrLmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ3RyYWNrTmFtZScpWzBdLmlubmVySFRNTCA9IGRhdGFbaV0ubmFtZTtcblx0XHR0cmFjay5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCdwbGF5JylbMF0uc2V0QXR0cmlidXRlKCdkYXRhLXByZXZpZXcnLCBkYXRhW2ldLnByZXZpZXdfdXJsKTtcblx0XHR0cmFjay5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCdwbGF5JylbMF0uc2V0QXR0cmlidXRlKCdJRCcsJ2EnK2RhdGFbaV0uX2lkKTtcblx0XHR0cmFjay5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCdwYXVzZScpWzBdLnNldEF0dHJpYnV0ZSgnSUQnLCdhJytkYXRhW2ldLl9pZCk7XG5cblx0XHR2YXIgcGFyZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnJlc3VsdHMudHJhY2snKVswXTtcblx0XHR2YXIgcmVmZXJlbmNlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnNlYXJjaFRyYWNrLmhpZGRlbicpWzBdO1xuXHRcdHBhcmVudC5pbnNlcnRCZWZvcmUodHJhY2ssIHJlZmVyZW5jZSk7XG5cdH1cblx0XG5cdC8vc2hvdyBzZWN0aW9uIHRpdGxlXG5cdGlmKGRhdGEubGVuZ3RoPjApe1xuXHRcdHNob3dSZXN1bHRzKCk7XG5cdFx0ZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnI3RyYWNrcy5zZWFyY2hUaXRsZScpWzBdLmNsYXNzTmFtZSA9ICdzZWFyY2hUaXRsZSc7XG5cdH1cblxuXHQvL2FkZCBldmVudCBsaXN0ZW5lclxuXHR0cmFja1ByZXZpZXcoKTtcbn1cblxuZnVuY3Rpb24gcG9wdWxhdGVDYXRhbG9ndWUoZGF0YSl7XG5cdGNvbnNvbGUubG9nKFwiQ2F0OiBcIitkYXRhKTtcbn1cblxuIl0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9
